<!DOCTYPE html>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<html lang="zh-cn">
  <head>
    <title>golang | brettkk</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="èµ„æ–™ ğŸ”— ç›®å‰golangçš„ä¸»è¦maintainer: Russ Cox ä¸ªäººä¸»">
<meta name="generator" content="Hugo 0.84.0" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/zenburn.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<link rel="stylesheet" href="http://brettkk.github.io/css/syntax.css" />


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />




  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">golang</h1>

    <div class="tip">
        <time datetime="2021-05-07 18:54:41 &#43;0800 CST">May 7, 2021</time>
        <span class="split">
          Â·
        </span>
        <span>
          2135 words
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          5 minute read
        </span>
    </div>

    
    
        
  
    <aside class="toc">
      <details>
          <summary>Table of Contents
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#èµ„æ–™">èµ„æ–™</a></li>
    <li><a href="#å¤šæ€ç»§æ‰¿-èŒƒå‹">å¤šæ€ï¼Œç»§æ‰¿ï¼Œ èŒƒå‹</a>
      <ul>
        <li><a href="#ç»§æ‰¿">ç»§æ‰¿</a></li>
        <li><a href="#å¤šæ€">å¤šæ€</a></li>
        <li><a href="#èŒƒå‹">èŒƒå‹</a></li>
        <li><a href="#æ¥å£çš„ä½¿ç”¨å®è·µ">æ¥å£çš„ä½¿ç”¨å®è·µ</a></li>
      </ul>
    </li>
    <li><a href="#æ¨¡ç³Šç‚¹">æ¨¡ç³Šç‚¹</a>
      <ul>
        <li><a href="#æ•°ç»„ä¸åˆ‡ç‰‡">æ•°ç»„ä¸åˆ‡ç‰‡</a></li>
        <li><a href="#å‡½æ•°çš„æ¥å—è€…">å‡½æ•°çš„æ¥å—è€…</a></li>
        <li><a href="#golangå€¼æ‹·è´">golangå€¼æ‹·è´</a></li>
        <li><a href="#é—­åŒ…">é—­åŒ…</a></li>
        <li><a href="#unsafeåŒ…">unsafeåŒ…</a></li>
        <li><a href="#nil">nil</a></li>
        <li><a href="#åå°„">åå°„</a></li>
        <li><a href="#å†…å­˜ç®¡ç†">å†…å­˜ç®¡ç†</a></li>
      </ul>
    </li>
    <li><a href="#go-æ±‡ç¼–">go æ±‡ç¼–</a></li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


    


    <div class="content">
      <h2 id="èµ„æ–™">èµ„æ–™ <a href="#%e8%b5%84%e6%96%99" class="anchor">ğŸ”—</a></h2><ol>
<li>
<p>ç›®å‰golangçš„ä¸»è¦maintainer: Russ Cox</p>
</li>
<li>
<p>ä¸ªäººä¸»é¡µï¼šswtch.com/~rsc/</p>
</li>
<li>
<p>awesome-goç³»åˆ—ï¼Œhttps://github.com/gocn/knowledge</p>
</li>
</ol>
<hr>
<h2 id="å¤šæ€ç»§æ‰¿-èŒƒå‹">å¤šæ€ï¼Œç»§æ‰¿ï¼Œ èŒƒå‹ <a href="#%e5%a4%9a%e6%80%81%e7%bb%a7%e6%89%bf-%e8%8c%83%e5%9e%8b" class="anchor">ğŸ”—</a></h2><p>golangä¸­é¢å‘å¯¹è±¡çš„å®ç°æ–¹å¼</p>
<h3 id="ç»§æ‰¿">ç»§æ‰¿ <a href="#%e7%bb%a7%e6%89%bf" class="anchor">ğŸ”—</a></h3><p>ç»„åˆç»“æ„ä½“ï¼Œä¸€ä¸ªç»“æ„ä½“åµŒå…¥å¦ä¸€ä¸ªç»“æ„ä½“ï¼Œèƒ½å¤Ÿå®ç°å¯¹åµŒå…¥ç»“æ„ä½“çš„å­—æ®µä»¥åŠå…¶å®ç°çš„æ–¹æ³•çš„ç»§æ‰¿ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">person</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">age</span>  <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">student</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">person</span> <span style="color:#75715e">//   åŒ¿åå­—æ®µï¼Œé€šè¿‡ç»„åˆçš„æ–¹å¼
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">school</span> <span style="color:#66d9ef">string</span> 
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">person</span>) <span style="color:#a6e22e">talk</span>() {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">age</span>)
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">student</span>) <span style="color:#a6e22e">getSchool</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">school</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">student</span>{<span style="color:#a6e22e">person</span>{<span style="color:#e6db74">&#34;brettkk&#34;</span>, <span style="color:#ae81ff">18</span>}, <span style="color:#e6db74">&#34;yidu&#34;</span>}
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">name</span>) <span style="color:#75715e">// ç»§æ‰¿personçš„nameå­—æ®µ
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">talk</span>() <span style="color:#75715e">// ç»§æ‰¿personå®ç°çš„æ–¹æ³•
</span><span style="color:#75715e"></span>}</code></pre></div>
<h3 id="å¤šæ€">å¤šæ€ <a href="#%e5%a4%9a%e6%80%81" class="anchor">ğŸ”—</a></h3><p>goæ²¡æœ‰ implements, extends å…³é”®å­—ï¼Œ golangæ˜¯å»é¸­å­ç±»å‹ï¼šçœ‹èµ·æ¥åƒé¸­å­ï¼Œ é‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­ã€‚</p>
<p>å¤šæ€ï¼š çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨å»è°ƒç”¨æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œèƒ½å¤Ÿæ ¹æ®å­ç±»çš„ç±»å‹å»æ‰§è¡Œå­ç±»å½“ä¸­çš„æ–¹æ³•ã€‚</p>
<p>ä¸ºä»€ä¹ˆæ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰èƒ½æ ¹æ®å­ç±»çš„ç±»å‹æ‰§è¡Œå­ç±»çš„æ–¹æ³•ï¼Ÿ</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang">
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Person</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">gender</span>() <span style="color:#66d9ef">string</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Men</span> <span style="color:#66d9ef">struct</span>{
    <span style="color:#a6e22e">Gender</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">Age</span> <span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">Name</span> <span style="color:#66d9ef">string</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Woman</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Gender</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">Age</span> <span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">Name</span> <span style="color:#a6e22e">strings</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#a6e22e">Men</span>) <span style="color:#a6e22e">gender</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">Gender</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">Woman</span>) <span style="color:#a6e22e">gender</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Gender</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">JudgeFunc</span>() <span style="color:#66d9ef">bool</span> {
    <span style="color:#75715e">// may has many code
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// can&#39;t not get boolean result until running this JudgeFunc
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#a6e22e">Person</span>
    <span style="color:#75715e">// so compiler can&#39;t not known clearly about the type info of a
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">a</span> = <span style="color:#a6e22e">JudgeFunc</span>() <span style="color:#960050;background-color:#1e0010">?</span> <span style="color:#a6e22e">Men</span>{} : <span style="color:#a6e22e">Woman</span>{}

    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> <span style="color:#a6e22e">Person</span>
    <span style="color:#75715e">// compiler can judge the type info of a 
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">b</span> = <span style="color:#a6e22e">Men</span>{} <span style="color:#75715e">// or b = Woman{}
</span><span style="color:#75715e"></span>}

</code></pre></div><h3 id="èŒƒå‹">èŒƒå‹ <a href="#%e8%8c%83%e5%9e%8b" class="anchor">ğŸ”—</a></h3><p>ç©ºinterface{} ç±»å‹ï¼Œæ²¡æœ‰æ–¹æ³•é›†çš„æ¥å£ï¼Œåªéœ€è¦å­˜ç±»å‹å’Œç±»å‹å¯¹åº”çš„å€¼å³å¯ã€‚</p>
<p>ç©ºinterface{} = (type, value) ==&gt; (nil, nil) == nil</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">eface</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">_type</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">_type</span>
	<span style="color:#a6e22e">data</span>  <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Pointer</span>
}

</code></pre></div><h3 id="æ¥å£çš„ä½¿ç”¨å®è·µ">æ¥å£çš„ä½¿ç”¨å®è·µ <a href="#%e6%8e%a5%e5%8f%a3%e7%9a%84%e4%bd%bf%e7%94%a8%e5%ae%9e%e8%b7%b5" class="anchor">ğŸ”—</a></h3><p>golangæºç é‡Œçš„è¾ƒå¥½å®ç°æ–¹å¼æ˜¯ï¼š ä½¿ç”¨å°çš„æ¥å£ï¼Œå°¤å…¶æ˜¯åªåŒ…å«ä¸€ä¸ªæ–¹æ³•çš„æ¥å£ï¼›é€šè¿‡å°æ¥å£çš„ç»„åˆæ¥å®šä¹‰å¤§æ¥å£ã€‚</p>
<p>å¥½å¤„æ˜¯ï¼šä½¿ç”¨è€…å¯ä»¥åªä¾èµ–äºå¿…è¦åŠŸèƒ½çš„æœ€å°æ¥å£ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Reader</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#a6e22e">Read</span>(<span style="color:#a6e22e">p</span> []<span style="color:#66d9ef">byte</span>) (<span style="color:#a6e22e">n</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Writer</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">p</span> []<span style="color:#66d9ef">byte</span>) (<span style="color:#a6e22e">n</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">ReadWriter</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#a6e22e">Reader</span>
    <span style="color:#a6e22e">Writer</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">store</span>(<span style="color:#a6e22e">reader</span> <span style="color:#a6e22e">Reader</span>) <span style="color:#66d9ef">error</span> {
    <span style="color:#75715e">// å…¥å‚å¯ä»¥åªä¾èµ–äºå¿…è¦åŠŸèƒ½çš„æœ€å°æ¥å£ï¼Œ è®©å‡½æ•°çš„è¿”å›æ›´å¹¿
</span><span style="color:#75715e"></span>}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">store</span>(<span style="color:#a6e22e">readWriter</span> <span style="color:#a6e22e">ReadWriter</span>) <span style="color:#66d9ef">error</span> {
    <span style="color:#75715e">// å…¥å‚ä¾èµ–äº†ä¸å¿…è¦åŠŸèƒ½çš„æ¥å£ï¼Œè®©é™åˆ¶äº†å‡½æ•°çš„ä½¿ç”¨èŒƒå›´ä¸ºæ›´å°
</span><span style="color:#75715e"></span>}

</code></pre></div><h2 id="æ¨¡ç³Šç‚¹">æ¨¡ç³Šç‚¹ <a href="#%e6%a8%a1%e7%b3%8a%e7%82%b9" class="anchor">ğŸ”—</a></h2><h3 id="æ•°ç»„ä¸åˆ‡ç‰‡">æ•°ç»„ä¸åˆ‡ç‰‡ <a href="#%e6%95%b0%e7%bb%84%e4%b8%8e%e5%88%87%e7%89%87" class="anchor">ğŸ”—</a></h3><p>æ•°ç»„çš„åˆå§‹åŒ– ï¼ˆå…ƒç´ ç±»å‹ï¼Œ æ•°ç»„å¤§å°ï¼‰</p>
<p>2ç§åˆå§‹åŒ–æ–¹å¼ï¼Œæ˜¾å¼çš„æŒ‡å®šæ•°ç»„çš„å¤§å°</p>
<ol>
<li>arr := [3]int{1, 2, 3}</li>
<li>[...]T å£°æ˜æ•°ç»„ // arr := [...]int{1, 2, 3}</li>
</ol>
<br/>
<h3 id="å‡½æ•°çš„æ¥å—è€…">å‡½æ•°çš„æ¥å—è€… <a href="#%e5%87%bd%e6%95%b0%e7%9a%84%e6%8e%a5%e5%8f%97%e8%80%85" class="anchor">ğŸ”—</a></h3><p>å‡½æ•°æ¥å—è€…ä¸ºæŒ‡é’ˆç±»å‹:</p>
<ol>
<li>å‡½æ•°å¯ä»¥ä¿®æ”¹æ¥å—è€…çš„å†…å®¹</li>
<li>é¿å…æ–¹æ³•è°ƒç”¨æ—¶å˜é‡çš„æ‹·è´ï¼Œè€Œæ˜¯æŒ‡é’ˆçš„æ‹·è´</li>
</ol>
<br/>
<h3 id="golangå€¼æ‹·è´">golangå€¼æ‹·è´ <a href="#golang%e5%80%bc%e6%8b%b7%e8%b4%9d" class="anchor">ğŸ”—</a></h3><p>goä¸¥æ ¼ä¸Šåªæœ‰å¤åˆ¶æ‹·è´ä¼ é€’</p>
<p>æ€»æ˜¯åˆ›å»ºå‰¯æœ¬æŒ‰å€¼ä¼ é€’ï¼Œåªä¸è¿‡è¿™ä¸ªå‰¯æœ¬å¯ä»¥æ˜¯å˜é‡çš„å‰¯æœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‡é’ˆçš„å‰¯æœ¬</p>
<br/>
<h3 id="é—­åŒ…">é—­åŒ… <a href="#%e9%97%ad%e5%8c%85" class="anchor">ğŸ”—</a></h3><p>é—­åŒ…=å‡½æ•°+å¼•ç”¨ç¯å¢ƒã€‚</p>
<p>é—­åŒ…é‡Œå¼•ç”¨å±€éƒ¨å˜é‡æ—¶ï¼Œåœ¨å †ä¸Šåˆ›å»ºè¯¥å˜é‡çš„ä¸€ä¸ªæ‹·è´ï¼Œå¹¶æŠŠè¯¥å˜é‡åœ°å€å’Œå‡½æ•°é—­åŒ…ç»„æˆä¸€ä¸ªç»“æ„ä½“ï¼Œå¹¶æŠŠè¯¥ç»“æ„ä½“ä¼ å‡ºæ¥ä½œä¸ºè¿”å›å€¼</p>
<br/>
<h3 id="unsafeåŒ…">unsafeåŒ… <a href="#unsafe%e5%8c%85" class="anchor">ğŸ”—</a></h3><p>uintpträ¸unsafe.Pointerï¼ˆç±»ä¼¼void*ï¼‰</p>
<ol>
<li>T1æŒ‡é’ˆä¸ T2æŒ‡é’ˆç±»å‹ä¹‹é—´çš„è½¬æ¢</li>
<li>ä¿®æ”¹å†…å­˜æ•°æ®ï¼Œ uintptr å¸¸ç”¨äºä¸ unsafe.Pointeré…åˆï¼Œç”¨äºåšæŒ‡é’ˆè¿ç®—</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#75715e">//ç»“æ„ä½“çš„æˆå‘˜å˜é‡åœ¨å†…å­˜å­˜å‚¨ä¸Šæ˜¯ä¸€æ®µè¿ç»­çš„å†…å­˜
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Num</span> <span style="color:#66d9ef">struct</span>{
	<span style="color:#a6e22e">i</span> <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">j</span> <span style="color:#66d9ef">int64</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>(){
	<span style="color:#a6e22e">n</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Num</span>{<span style="color:#a6e22e">i</span>: <span style="color:#e6db74">&#34;EDDYCJY&#34;</span>, <span style="color:#a6e22e">j</span>: <span style="color:#ae81ff">1</span>}
	<span style="color:#a6e22e">nPointer</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">n</span>)
	<span style="color:#75715e">// ç»“æ„ä½“çš„åˆå§‹åœ°å€å°±æ˜¯ç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡çš„å†…å­˜åœ°å€
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">niPointer</span> <span style="color:#f92672">:=</span> (<span style="color:#f92672">*</span><span style="color:#66d9ef">string</span>)(<span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">nPointer</span>))
	<span style="color:#f92672">*</span><span style="color:#a6e22e">niPointer</span> = <span style="color:#e6db74">&#34;wuhan&#34;</span>
	<span style="color:#75715e">// åŸºäºç»“æ„ä½“çš„æˆå‘˜åœ°å€å»è®¡ç®—åç§»é‡ã€‚å°±èƒ½å¤Ÿå¾—å‡ºå…¶ä»–æˆå‘˜å˜é‡çš„å†…å­˜åœ°å€
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//uintptr æ˜¯ Go çš„å†…ç½®ç±»å‹ã€‚è¿”å›æ— ç¬¦å·æ•´æ•°ï¼Œå¯å­˜å‚¨ä¸€ä¸ªå®Œæ•´çš„åœ°å€ã€‚åç»­å¸¸ç”¨äºæŒ‡é’ˆè¿ç®—
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//unsafe.Offsetofï¼šè¿”å›æˆå‘˜å˜é‡ x åœ¨ç»“æ„ä½“å½“ä¸­çš„åç§»é‡ã€‚æ›´å…·ä½“çš„è®²ï¼Œå°±æ˜¯è¿”å›ç»“æ„ä½“åˆå§‹ä½ç½®åˆ° x ä¹‹é—´çš„å­—èŠ‚æ•°
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//uintptr ç±»å‹æ˜¯ä¸èƒ½å­˜å‚¨åœ¨ä¸´æ—¶å˜é‡ä¸­çš„ ä¸´æ—¶å˜é‡æ˜¯å¯èƒ½è¢«åƒåœ¾å›æ”¶æ‰çš„ ä¹‹åçš„å†…å­˜æ“ä½œæœ‰è¿·èŒ«äº†
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">njPointer</span> <span style="color:#f92672">:=</span> (<span style="color:#f92672">*</span><span style="color:#66d9ef">int64</span>)(<span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Pointer</span>(uintptr(<span style="color:#a6e22e">nPointer</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Offsetof</span>(<span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">j</span>)))
	<span style="color:#f92672">*</span><span style="color:#a6e22e">njPointer</span> = <span style="color:#ae81ff">91</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;n.i: %s, n.j: %d&#34;</span>, <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">j</span>)
}
</code></pre></div><p>æŒ‡é’ˆæ˜¯å¯¹å†…å­˜åŒºåŸŸçš„åœ°å€ï¼Œ ä¸æŒ‡é’ˆç›¸é…åˆçš„ç±»å‹
è¯´æ˜åŒºåŸŸæœ‰å“ªäº›å±æ€§ï¼Œå¦‚ä½•å»è§£æã€‚</p>
<br/>
<h3 id="nil">nil <a href="#nil" class="anchor">ğŸ”—</a></h3><ul>
<li>what is nil
<ul>
<li>nil is a kind of zero</li>
</ul>
</li>
<li>what is nil in go
<ul>
<li>å„ç§ç±»å‹çš„é›¶å€¼</li>
<li>åŸºæœ¬ç±»å‹çš„é›¶å€¼ä¸ä¸ºnil
<ul>
<li>boolä¸ºfalse</li>
<li>numberä¸º0</li>
<li>stringä¸º&quot;&quot;</li>
</ul>
</li>
<li>éåŸºæœ¬ç±»å‹çš„é›¶å€¼ä¸ºnil
<ul>
<li>pointer, slice, map, channel, function, interface{} ==&gt; nil</li>
<li>interface{}ç±»å‹ éœ€è¦typeå’Œvalueå‡ä¸ºnilæ—¶ï¼Œæ‰ä¼šä¸ºnil</li>
<li>structure{}ï¼Œå› ä¸ºæœ‰ç»“æ„typeå­˜åœ¨ï¼Œtypeä¸ä¸ºnilï¼Œæ‰€ä»¥ç»“æ„ä½“å˜é‡ä¸ä¼šæ˜¯nil</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<h3 id="åå°„">åå°„ <a href="#%e5%8f%8d%e5%b0%84" class="anchor">ğŸ”—</a></h3><p>åå°„ Reflection ï¼Œinterfaceå¯¹è±¡=ï¼ˆType, Valueï¼‰</p>
<p>åå°„ç±»å‹ reflect.Type, reflect.Value)</p>
<p>ä¸‰ç§åå°„çš„åŸºæœ¬æ“ä½œï¼š</p>
<ol>
<li>åå°„å¯ä»¥å°†interfaceç±»å‹çš„å˜é‡ è½¬æ¢ä¸º åå°„å¯¹è±¡ï¼ˆreflect.Type reflect.Valueï¼‰</li>
<li>åå°„å¯ä»¥å°†åå°„å¯¹è±¡ è¿˜åŸä¸ºinterfaceå¯¹è±¡</li>
<li>åå°„å¯¹è±¡å¯ä»¥ä¿®æ”¹ï¼Œæå‰æ˜¯valueå€¼æ˜¯å˜é‡çš„æŒ‡é’ˆ</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">x</span> <span style="color:#66d9ef">float</span>= <span style="color:#ae81ff">3.1</span> 
<span style="color:#a6e22e">v</span><span style="color:#f92672">:=</span> <span style="color:#a6e22e">reflect</span>.<span style="color:#a6e22e">ValueOf</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">x</span>) <span style="color:#75715e">//éœ€è¦ä¼ å…¥xçš„æŒ‡é’ˆ
</span><span style="color:#75715e"></span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Elem</span>().<span style="color:#a6e22e">SetFloat</span>(<span style="color:#ae81ff">3.4</span>);
</code></pre></div><p>ä½œç”¨ï¼š</p>
<ol>
<li>è¿è¡Œæ—¶åŠ¨æ€è°ƒç”¨æ–¹æ³•</li>
<li>è¿è¡Œæ—¶æ„é€ å‡½æ•°è¿›è¡Œmockæ’æ¡©</li>
</ol>
<br/>
<h3 id="å†…å­˜ç®¡ç†">å†…å­˜ç®¡ç† <a href="#%e5%86%85%e5%ad%98%e7%ae%a1%e7%90%86" class="anchor">ğŸ”—</a></h3><ol>
<li>åŸºæœ¬æƒ³æ³•ï¼šå±€éƒ¨Pä¸Šï¼ˆper cpuï¼‰å’Œå…¨å±€é˜Ÿåˆ—æƒ³ç»“åˆçš„å‡è¡¡æ€æƒ³ã€‚å±€éƒ¨åˆ†é…æ— éœ€åŠ é”ï¼Œå±€éƒ¨åˆ†é…æ— æ³•æ»¡è¶³æ—¶åŠ é”å…¨å±€åˆ†é…</li>
</ol>
<ul>
<li>src/runtime/mheap.go:mspan</li>
<li>å†…å­˜å›æ”¶åŸç†
<ul>
<li>ä¸‰è‰²æ ‡è®°æ³• ï¼ˆæœªä½¿ç”¨ï¼Œå·²ä½¿ç”¨ï¼Œå¸¦å¤„ç†ï¼‰</li>
<li>rootå¯¹è±¡å¼€å§‹ï¼ŒBFSéå†æ ‡è®°ï¼Œ</li>
</ul>
</li>
<li>é€ƒé€¸åˆ†æï¼ˆå¯¹è±¡æ˜¯å¦è¢«å‡½æ•°å¤–é¢å¼•ç”¨ ä¾‹å¦‚é—­åŒ…ï¼› å¯¹è±¡è¿‡å¤§ä¹Ÿå¯èƒ½åœ¨å †ä¸­ï¼‰
<ul>
<li>é€ƒé€¸åˆ†æçš„ç›®çš„æ˜¯å†³å®šå˜é‡çš„å†…å­˜åˆ†é…åœ°å€æ˜¯åœ¨æ ˆè¿˜æ˜¯å †</li>
<li>é€ƒé€¸åˆ†æåœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆçš„</li>
<li>ä¼ é€’æŒ‡é’ˆçœŸçš„æ¯”ä¼ å€¼é«˜æ•ˆå—ï¼Ÿä¸ä¸€å®š ç”±äºæŒ‡é’ˆä¼ é€’ä¼šäº§ç”Ÿé€ƒé€¸ï¼Œå¯èƒ½ä¼šä½¿ç”¨å †ï¼Œå¢åŠ GCè´Ÿæ‹…ã€‚</li>
<li>go build -gcflags=-m // escapes to heap</li>
</ul>
</li>
</ul>
<br/>
<h2 id="go-æ±‡ç¼–">go æ±‡ç¼– <a href="#go-%e6%b1%87%e7%bc%96" class="anchor">ğŸ”—</a></h2><p>Generate x86 Assembly with Go</p>
<p><a href="https://github.com/mmcloughlin/avo">https://github.com/mmcloughlin/avo</a></p>
<ul>
<li>æ±‡ç¼–é£æ ¼åˆ†ä¸º2ç±»</li>
</ul>
<ol>
<li>intelé£æ ¼</li>
<li>AT&amp;Té£æ ¼(å·¦ --&gt; å³) goæ˜¯plan9ï¼Œ å±äºæ­¤ç±»</li>
</ol>
<ul>
<li>
<p>åŠ©è®°ç¬¦    call, add</p>
</li>
<li>
<p>register  ax, sb, pc</p>
</li>
<li>
<p>ç«‹å³æ•° $1 , $0x100</p>
</li>
<li>
<p>å†…å­˜å¯»å€ ï¼ˆR1ï¼‰</p>
</li>
<li>
<p>plan 9</p>
<ul>
<li><a href="https://lrita.github.io/2017/12/12/golang-asm/#go%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8">https://lrita.github.io/2017/12/12/golang-asm/#go%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8</a></li>
<li><a href="https://lrita.github.io/images/posts/go/GoFunctionsInAssembly.pdf">https://lrita.github.io/images/posts/go/GoFunctionsInAssembly.pdf</a></li>
<li><a href="https://github.com/buptbill220/gotls/tree/master/interesting">https://github.com/buptbill220/gotls/tree/master/interesting</a></li>
<li>æŸ¥çœ‹å½“å‰cpuæ¶æ„çš„æŒ‡ä»¤é›†åˆ cat /proc/cpuinfo | grep flags | head -1</li>
<li>æŒ‡ä»¤æŸ¥è¯¢ï¼š <a href="http://68k.hax.com/">http://68k.hax.com/</a></li>
<li>å‘½ä»¤æŸ¥è¯¢ï¼šhttps://9p.io/magic/man2html/1/8a</li>
<li>plan9 æ–‡æ¡£ï¼š <a href="https://9p.io/sys/doc/">https://9p.io/sys/doc/</a></li>
</ul>
</li>
<li>
<p><a href="https://defuse.ca/online-x86-assembler.htm#disassembly2">https://defuse.ca/online-x86-assembler.htm#disassembly2</a></p>
<ul>
<li>x86 or x64 assembly instructions encoding&lt;==&gt; decoding binary code</li>
<li>It uses GCC and objdump behind the scenes</li>
</ul>
</li>
<li>
<p>goroot/src/syscall --ã€‹ å»ºè®®ä½¿ç”¨ golang.org/x/sys</p>
</li>
</ul>

    </div>

    
        <div class="tags">
            
                <a href="http://brettkk.github.io/tags/golang">golang</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <div class="copyright">
    
       Â© Copyright 
       2022 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-cactus-plus'>nodejh</a>
      </div>
    
</footer>



  </body>
</html>
