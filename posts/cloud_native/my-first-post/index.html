<!DOCTYPE html>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<html lang="zh-cn">
  <head>
    <title>kubernetes | brettkk</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="service mesh ğŸ”—å¾®æœåŠ¡å†…éƒ¨æœ‰åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„é€šç”¨åŠŸèƒ½ï¼šç†”æ–­ç­–ç•¥ã€è´Ÿè½½å‡è¡¡">
<meta name="generator" content="Hugo 0.103.1" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/zenburn.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<link rel="stylesheet" href="http://brettkk.github.io/css/syntax.css" />


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />




  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">kubernetes</h1>

    <div class="tip">
        <time datetime="2021-03-03 18:34:48 &#43;0800 CST">Mar 3, 2021</time>
        <span class="split">
          Â·
        </span>
        <span>
          963 words
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          2 minute read
        </span>
    </div>

    
    
        
  
    <aside class="toc">
      <details>
          <summary>Table of Contents
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#service-mesh">service mesh</a></li>
        <li><a href="#serviceless">serviceless</a></li>
        <li><a href="#å®¹å™¨æŠ€æœ¯å†å²">å®¹å™¨æŠ€æœ¯å†å²</a></li>
      </ul>
    </li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


    


    <div class="content">
      <h3 id="service-mesh">service mesh <a href="#service-mesh" class="anchor">ğŸ”—</a></h3><p>å¾®æœåŠ¡å†…éƒ¨æœ‰åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„é€šç”¨åŠŸèƒ½ï¼šç†”æ–­ç­–ç•¥ã€è´Ÿè½½å‡è¡¡ã€æœåŠ¡å‘ç°ã€è®¤è¯å’Œæˆæƒã€quotaé™åˆ¶ã€traceå’Œç›‘æ§ç­‰ç­‰</p>
<p>è¿™ç§å¾®æœåŠ¡å­˜åœ¨çš„é—®é¢˜ï¼š</p>
<ul>
<li>è™½ç„¶æœ‰ç°æˆçš„æ¡†æ¶åšäº†è¿™äº›äº‹æƒ…ï¼Œä½†åœ¨ä¹Ÿéœ€è¦ä¸šåŠ¡å»é…ç½®å’Œç®¡ç†æ¡†æ¶</li>
<li>è¿™äº›æ¡†æ¶libæˆ–è€…sdkç¼ºä¸šåŠ¡è¯­è¨€æ—¶ï¼Œå¾ˆéš¾èå…¥æˆ–è€…éœ€è¦å¼€å‘å¯¹åº”è¯­è¨€çš„åŒ…æ¥èå…¥å¾®æœåŠ¡å†…éƒ¨</li>
<li>æ¡†æ¶å‡çº§ï¼Œå¯¹ä¸šåŠ¡ä¸é€æ˜ï¼Œéœ€è¦ä¸šåŠ¡è‡ªè¡Œå‡çº§</li>
</ul>
<p>sidecar å•è¾¹æ¨¡å¼ä»£ç†æ¨¡å¼ã€‚ åŒä¸€ä¸ªå¾®æœåŠ¡çš„ä»£ç†è¿›ç¨‹service meshäº’é€šï¼Œä¸å…¶ä»–å¾®æœåŠ¡çš„service meshä¹Ÿé€šä¿¡ï¼Œæ‰€ä»¥å•çœ‹ä»£ç†è¿›ç¨‹åƒç½‘ä¸€æ ·ï¼Œæ‰€ä»¥å«service meshã€‚</p>
<p>istio, prometheus, k8s, runc, docker, libcontainer,</p>
<h3 id="serviceless">serviceless <a href="#serviceless" class="anchor">ğŸ”—</a></h3><p>ä¸»è¦åŒ…å«ä¸¤ä¸ªé¢†åŸŸçš„æŠ€æœ¯ï¼ŒBaaSï¼ˆBackend as a Serviceï¼‰å’ŒFaaSï¼ˆFunction as a Serviceï¼‰</p>
<p>ç®€åŒ–åç«¯å¼€å‘æµç¨‹...</p>
<h3 id="å®¹å™¨æŠ€æœ¯å†å²">å®¹å™¨æŠ€æœ¯å†å² <a href="#%e5%ae%b9%e5%99%a8%e6%8a%80%e6%9c%af%e5%8e%86%e5%8f%b2" class="anchor">ğŸ”—</a></h3><p>1979å¹´ chroot è®¾ç½®è¿›ç¨‹è®¿é—®çš„æ ¹ç›®å½•</p>
<p>2006å¹´ google ç»™kernelæä¾›Control Groups</p>
<p>2008å¹´ LXC ç¬¬ä¸€ä¸ªå®¹å™¨ç®¡ç†æ–¹æ¡ˆ</p>
<p>2015å¹´ google æä¾›libcontainer</p>
<p>2013å¹´ å®¹å™¨ç®¡ç†äº§å“docker</p>
<hr>
<p>dockerç®€åŒ–æœåŠ¡çš„ç®¡ç†ï¼Œç±»ä¼¼systemd, supervisor; ä½†æ›´åŠ é‡è¦çš„é•œåƒæŠ€æœ¯ã€‚</p>
<pre tabindex="0"><code>docker run hello-world
To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &#34;hello-world&#34; image from the Docker Hub.
    (arm64v8)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.
</code></pre><hr>
<p>cgroupï¼š ç¨‹åºè¿è¡Œæ—¶å¯¹èµ„æºçš„è°ƒåº¦è§¦å‘ç›¸åº”çš„é’©å­ä»¥è¾¾åˆ°èµ„æºè¿½è¸ªå’Œé™åˆ¶çš„ç›®çš„</p>
<p>Open Container Initiativeï¼ˆOCIï¼‰æˆç«‹åï¼Œ libcontainer å°è£…åœ¨runCåŒ…é‡Œã€‚</p>
<p>unionFSå¯ä»¥æŠŠæ–‡ä»¶ç³»ç»Ÿä¸Šçš„å¤šä¸ªç›®å½•å†…å®¹è”åˆæŒ‚è½½åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œè€Œç›®å½•çš„ç‰©ç†ä½ç½®æ˜¯åˆ†å¼€çš„</p>
<hr>
<ul>
<li>
<p>api server</p>
</li>
<li>
<p>scheduler</p>
</li>
<li>
<p>controler</p>
</li>
<li>
<p>kubelet</p>
<ul>
<li>podç®¡ç†</li>
<li>å®¹å™¨å¥åº·æ£€æŸ¥ LivenessProbe ä¸ReadinessProbe</li>
<li>å®¹å™¨ç›‘æ§  é€šè¿‡cAdvisorè·å–èŠ‚ç‚¹å’Œå®¹å™¨çš„æ•°æ®</li>
</ul>
</li>
<li>
<p>proxy</p>
</li>
<li>
<p>pod ï¼ˆè¿›ç¨‹ç»„ï¼‰</p>
<ul>
<li>æ‰“å¼€å®¹å™¨ä¹‹é—´çš„éš”ç¦»æ€§ï¼Œä¸¤ä¸ªæ–¹å‘ ç½‘ç»œå’Œå­˜å‚¨æ¥é€šä¿¡ã€‚
<ul>
<li>Infra container å°å®¹å™¨æ¥å…±äº«æ•´ä¸ª Pod çš„  Network Namespace, ç›´æ¥ä½¿ç”¨localhostè¿›è¡Œé€šä¿¡ã€‚</li>
<li>å®¿ä¸»æœºä¸Šçš„ç›®å½•mountåˆ°podçš„å®¹ç§¯é‡Œçš„æ–‡ä»¶ç›®å½•ä¸‹ï¼Œå®ç°è¯»å†™æ–‡ä»¶é€šä¿¡ã€‚</li>
</ul>
</li>
<li>ä¸€ç»„ç®¡ç†å…³ç³»ç´§å¯†çš„å®¹å™¨ï¼ˆè¿›ç¨‹ï¼‰ï¼Œä¸ä¸šåŠ¡å®¹å™¨éœ€è¦çš„side carè¾…åŠ©å®¹ç§¯ï¼ˆæ—¥å¿—æ”¶é›†ï¼Œservice meshï¼Œ åº”ç”¨ç›‘æ§ï¼‰</li>
<li>å®¹å™¨ä¸åªcontainerdï¼Œk8séœ€è¦åŸºäºcontaineråšä¸€æ­¥æŠ½è±¡container runtime interfz</li>
<li>è®¾è®¡æ¨¡å¼æœ¬è´¨ï¼šè§£è€¦ å¤ç”¨</li>
</ul>
</li>
<li>
<p>service</p>
<ul>
<li>ä¸€ä¸ªsvcæ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œä¹Ÿæ˜¯ä¸€ç»„prodï¼Œé€šè¿‡label robinå®ç°IPè´Ÿè½½å‡è¡¡</li>
</ul>
</li>
<li>
<p>volume</p>
</li>
</ul>

    </div>

    
        <div class="tags">
            
                <a href="http://brettkk.github.io/tags/cloud-native">cloud native</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <script src="https://utteranc.es/client.js"
repo="brettKK/brettkk.github.io"
issue-term="title"
theme="github-light"
crossorigin="anonymous"
async>
</script>  

    <div class="copyright">
    
       Â© Copyright 
       2022 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-cactus-plus'>nodejh</a>
      </div>
    
</footer>




  </body>
</html>
