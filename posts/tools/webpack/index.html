<!DOCTYPE html>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<html lang="zh-cn">
  <head>
    <title>webpack | brettkk</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ ğŸ”—ä½œç”¨ å¿«é€Ÿä¸Šæ‰‹æµ‹è¯• ğŸ”—è¾“å…¥ï¼š src/ index.js a.js style.css node_modules/ lodash webpack å¤„ç†ï¼š 1">
<meta name="generator" content="Hugo 0.103.1" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/zenburn.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<link rel="stylesheet" href="http://brettkk.github.io/css/syntax.css" />


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />




  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">webpack</h1>

    <div class="tip">
        <time datetime="2025-09-03 00:00:00 &#43;0000 UTC">Sep 3, 2025</time>
        <span class="split">
          Â·
        </span>
        <span>
          2017 words
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          5 minute read
        </span>
    </div>

    
    
        
  
    <aside class="toc">
      <details>
          <summary>Table of Contents
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#ä¸ºä»€ä¹ˆéœ€è¦">ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</a></li>
    <li><a href="#å¿«é€Ÿä¸Šæ‰‹æµ‹è¯•">å¿«é€Ÿä¸Šæ‰‹æµ‹è¯•</a>
      <ul>
        <li><a href="#æºç å…¥å£">æºç å…¥å£</a></li>
      </ul>
    </li>
    <li><a href="#æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ</a></li>
    <li><a href="#webpack-çš„é’©å­è®¾è®¡">webpack çš„é’©å­è®¾è®¡</a>
      <ul>
        <li><a href="#asyncparallelhook-å¼‚æ­¥å¹¶è¡Œæ‰§è¡Œ-æ‰€æœ‰å›è°ƒåŒæ—¶å¯åŠ¨ç­‰å¾…å…¨éƒ¨å®Œæˆ">AsyncParallelHook, å¼‚æ­¥å¹¶è¡Œæ‰§è¡Œï¼Œ æ‰€æœ‰å›è°ƒåŒæ—¶å¯åŠ¨ï¼Œç­‰å¾…å…¨éƒ¨å®Œæˆã€‚</a></li>
      </ul>
    </li>
    <li><a href="#ä¸€äº›æºç ç‰‡æ®µ">ä¸€äº›æºç ç‰‡æ®µ</a>
      <ul>
        <li><a href="#heading"></a></li>
        <li><a href="#æ’ä»¶å¦‚ä½•ä½¿ç”¨é’©å­">æ’ä»¶å¦‚ä½•ä½¿ç”¨é’©å­ï¼Ÿ</a></li>
      </ul>
    </li>
    <li><a href="#åŸç†">åŸç†</a></li>
    <li><a href="#é‡åˆ°é…ç½®ä¸Šçš„é—®é¢˜">é‡åˆ°é…ç½®ä¸Šçš„é—®é¢˜</a>
      <ul>
        <li><a href="#npm-i">npm i</a></li>
      </ul>
    </li>
    <li><a href="#ä¸ªäººæ€è€ƒ">ä¸ªäººæ€è€ƒ</a></li>
    <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


    


    <div class="content">
      <h1 id="ä¸ºä»€ä¹ˆéœ€è¦">ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e9%9c%80%e8%a6%81" class="anchor">ğŸ”—</a></h1><p>ä½œç”¨</p>
<h1 id="å¿«é€Ÿä¸Šæ‰‹æµ‹è¯•">å¿«é€Ÿä¸Šæ‰‹æµ‹è¯• <a href="#%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b%e6%b5%8b%e8%af%95" class="anchor">ğŸ”—</a></h1><pre tabindex="0"><code>è¾“å…¥ï¼š
src/
  index.js
  a.js
  style.css
node_modules/
  lodash

webpack å¤„ç†ï¼š
  1 è§£æå…¥å£ï¼Œé€’å½’è§£æä¾èµ–ï¼Œï¼ˆindex.js -&gt; a.js -&gt; lodash + style.css
  2 loaderè½¬æ¢ï¼ˆcss -&gt; jsæ¨¡å—ï¼Œ ES6 -&gt; ES5ï¼‰
  3 æ„å»ºä¾èµ–å›¾ï¼Œ åˆ’åˆ†chunk
  4 ç”Ÿæˆruntimeå’Œæ‰“åŒ…ä»£ç 

è¾“å‡ºdist/
  main.js(ä¸šåŠ¡ä»£ç + runtime)
  vendor.jsï¼ˆlodashç¬¬ä¸‰æ–¹åº“ï¼‰
  main.css
  index.html å¼•å…¥ä¸Šé¢çš„æ–‡ä»¶
  img/ å¤„ç†åçš„å›¾ç‰‡èµ„æº
</code></pre><p><code>npm install --save-dev webpack webpack-cli</code>
<code>npx webpack</code></p>
<h2 id="æºç å…¥å£">æºç å…¥å£ <a href="#%e6%ba%90%e7%a0%81%e5%85%a5%e5%8f%a3" class="anchor">ğŸ”—</a></h2><ul>
<li>å‘½ä»¤è¡Œå…¥å£ï¼Œ bin/webpack.js</li>
<li>æ ¸å¿ƒé€»è¾‘å…¥å£ï¼Œ lib/webpack.js</li>
<li>æ ¸å¿ƒç±»ï¼š lib/Compiler.js å…¨å±€ç¼–è¯‘æ§åˆ¶ï¼Œ lib/Compilation.js å•æ¬¡ç¼–è¯‘ä¸Šä¸‹æ–‡</li>
</ul>
<h1 id="æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ <a href="#%e6%a0%b8%e5%bf%83%e6%a6%82%e5%bf%b5" class="anchor">ğŸ”—</a></h1><p>è§£æä¾èµ–ï¼Œç¼–è¯‘è½¬æ¢ï¼Œæ‰“åŒ…è¾“å‡ºã€‚
<code>webpack.config.js</code>é…ç½®äº†å…¥å£ï¼Œè¾“å‡ºï¼Œloaderï¼Œæ’ä»¶ã€‚</p>
<p>loaderï¼Œ plugin</p>
<p>ä¾èµ–å›¾çš„æ„å»ºï¼Œchunk ç”Ÿæˆé€»è¾‘ã€‚</p>
<p>å¦‚ä½•å¤„ç†å¾ªç¯ä¾èµ–ï¼Ÿ</p>
<h1 id="webpack-çš„é’©å­è®¾è®¡">webpack çš„é’©å­è®¾è®¡ <a href="#webpack-%e7%9a%84%e9%92%a9%e5%ad%90%e8%ae%be%e8%ae%a1" class="anchor">ğŸ”—</a></h1><p>é’©å­è®¾è®¡æ˜¯æ”¯æŒæ’ä»¶åŒ–æ¶æ„çš„åŸºç¡€ã€‚ <code>tapable</code>åº“ï¼Œé€šè¿‡ hook é’©å­åœ¨ç¼–è¯‘æµç¨‹çš„èŠ‚ç‚¹ä¸Šæ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œæ‰©å±• webpack çš„åŠŸèƒ½ã€‚</p>
<p>åˆ†ä¸¤æ­¥ï¼š è®¢é˜…å’Œå‘å¸ƒã€‚</p>
<ul>
<li>å…ˆå®šä¹‰é’©å­ï¼Œ åŠäº‹ä»¶è§¦å‘ç‚¹</li>
<li>æ’ä»¶é€šè¿‡æ³¨å†Œé’©å­ï¼Œè®¢é˜…äº‹ä»¶ï¼Œæ·»åŠ è‡ªå®šä¹‰é€»è¾‘</li>
<li>åœ¨ webpack çš„ç¼–è¯‘è¿‡ç¨‹ä¸­è§¦å‘é’©å­ï¼Œå‘å¸ƒäº‹ä»¶ï¼Œæ‰§è¡Œæ‰€æœ‰æ³¨å†Œçš„é€»è¾‘</li>
</ul>
<p>é’©å­ç±»å‹ï¼ˆåŒæ­¥/å¼‚æ­¥</p>
<ul>
<li>SyncHook, åŒæ­¥æ‰§è¡Œï¼Œæ‰€æœ‰æ³¨å†Œçš„å›è°ƒæŒ‰é¡ºåºæ‰§è¡Œï¼Œä¸å…³å¿ƒè¿”å›å€¼</li>
<li>SyncBailHook,åŒæ­¥æ‰§è¡Œï¼Œè‹¥æŸä¸ªå›è°ƒè¿”å›é undefinedï¼Œ ç†”æ–­ä¸­æ–­åç»­æ‰§è¡Œ</li>
<li>SyncWaterfallHook, åŒæ­¥æ‰§è¡Œï¼Œä¸Šä¸€ä¸ªå›è°ƒè¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªå›è°ƒçš„å‚æ•°ï¼Œæµæ°´çº¿ã€‚</li>
<li>AsyncSeriesHook, å¼‚æ­¥ä¸²è¡Œæ‰§è¡Œã€‚ Asyc å¼‚æ­¥ä½“ç°åœ¨å…è®¸æ³¨å†Œçš„å›è°ƒå‡½æ•°é‡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œå¹¶ç­‰å¼‚æ­¥æ“ä½œå®Œæˆä¹‹åç»§ç»­åç»­æ³¨å†Œçš„å‡½æ•°ã€‚
<ul>
<li>å¿…é¡»é€šè¿‡ tapAsync, tapPromise æ³¨å†Œè®¢é˜…äº‹ä»¶ï¼Œ éœ€è¦æ˜¾ç¤ºé€šçŸ¥å®Œæˆï¼Œå¦‚ callback(), Promiseã€‚</li>
<li>Series æŒ‰æ³¨å†Œé¡ºåºæ‰§è¡Œ</li>
</ul>
</li>
<li>
<h2 id="asyncparallelhook-å¼‚æ­¥å¹¶è¡Œæ‰§è¡Œ-æ‰€æœ‰å›è°ƒåŒæ—¶å¯åŠ¨ç­‰å¾…å…¨éƒ¨å®Œæˆ">AsyncParallelHook, å¼‚æ­¥å¹¶è¡Œæ‰§è¡Œï¼Œ æ‰€æœ‰å›è°ƒåŒæ—¶å¯åŠ¨ï¼Œç­‰å¾…å…¨éƒ¨å®Œæˆã€‚ <a href="#asyncparallelhook-%e5%bc%82%e6%ad%a5%e5%b9%b6%e8%a1%8c%e6%89%a7%e8%a1%8c-%e6%89%80%e6%9c%89%e5%9b%9e%e8%b0%83%e5%90%8c%e6%97%b6%e5%90%af%e5%8a%a8%e7%ad%89%e5%be%85%e5%85%a8%e9%83%a8%e5%ae%8c%e6%88%90" class="anchor">ğŸ”—</a></h2></li>
<li>AsyncSeriesBailHook, å¼‚æ­¥ä¸²è¡Œ+ç†”æ–­ã€‚</li>
</ul>
<p>æ¯ä¸ªé’©å­éƒ½æœ‰ä»¥ä¸‹æ ¸å¿ƒæ–¹æ³•ï¼š</p>
<ul>
<li>tap(name, callback) æ³¨å†ŒåŒæ­¥ï¼Œå¼‚æ­¥é’©å­</li>
<li>tapAsync(name, callback) æ³¨å†Œå¼‚æ­¥é’©å­</li>
<li>tapPromise(name, callback) æ³¨å†Œå¼‚æ­¥é’©å­</li>
<li>call(...args) è§¦å‘åŒæ­¥é’©å­ï¼Œä¼ å…¥å‚æ•°</li>
<li>callAsync(...args, callback) è§¦å‘å¼‚æ­¥é’©å­</li>
</ul>
<p>æ ¸å¿ƒå¯¹æˆé‚£ä¸ªï¼ˆCompiler, Compilationï¼‰é€šè¿‡ç»§æ‰¿ Tapable ç±»æ‹¥æœ‰é’©å­èƒ½åŠ›ã€‚</p>
<p>Compiler çš„é’©å­ï¼ˆäº‹ä»¶èŠ‚ç‚¹ï¼‰ã€‚
<code>initialize</code> SyncHookï¼Œ Compiler å®ä¾‹åˆå§‹åŒ–å®Œæˆæ—¶è§¦å‘ï¼Œ æ’ä»¶åˆå§‹åŒ–çš„å‡†å¤‡å·¥ä½œã€‚
<code>entryOption</code>, SyncBailHook, è§£æå…¥å£é…ç½®ä¹‹åè§¦å‘ï¼Œä¿®æ”¹å…¥å£é…ç½®å¦‚åŠ¨æ€æ·»åŠ å…¥å£ã€‚
<code>beforeRun</code>, AsyncSeriesHook, å¼€å§‹ç¼–è¯‘å‰ run æ–¹æ³•æ‰§è¡Œå‰ï¼Œæ¸…ç†ç¼“å­˜ï¼Œåˆå§‹åŒ–æ—¥å¿—ã€‚
<code>run</code>, AsyncSeriesHook, å¼€å§‹æ‰§è¡Œç¼–è¯‘æµç¨‹ï¼Œ è®°å½•ç¼–è¯‘å¼€å§‹æ—¶é—´ã€‚
<code>compile</code>, SyncHook, å¼€å§‹åˆ›å»º Compilation å®ä¾‹å‰è§¦å‘ï¼Œ ä¿®æ”¹ç¼–è¯‘å‚æ•°ã€‚
<code>make</code>, AsyncParallelHook, å¼€å§‹æ„å»ºæ¨¡å—ï¼ˆä¾èµ–è®¡ç®—çš„èµ·ç‚¹ï¼‰ï¼Œ è§¦å‘å…¥å£æ¨¡å—çš„åŠ è½½ã€‚
<code>emit</code>, AsyncSeriesHook, èµ„æºè¾“å‡ºåˆ°ç£ç›˜å‰ï¼Œ ä¼˜åŒ–èµ„æºï¼ˆå¦‚å‹ç¼©ï¼Œ æ·»åŠ æ³¨é‡Šï¼‰
<code>afterEmit</code>, AsyncSeriesHook, èµ„æºè¾“å‡ºåˆ°ç£ç›˜åï¼Œ é€šçŸ¥èµ„æºå·²ç”Ÿæˆå¦‚ä¸Šä¼  CDN
<code>done</code>ï¼Œ AsyncSeriesHook, æ‰€æœ‰ç¼–è¯‘å·¥ä½œå®Œæˆåï¼Œ è¾“å‡ºæ„å»ºç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚æ‰“åŒ…ä½“ç§¯ï¼‰ã€‚</p>
<p>Compilation é’©å­ï¼ˆäº‹ä»¶èŠ‚ç‚¹ï¼‰ã€‚ è´Ÿè´£æ¨¡å—è§£æï¼Œä¾èµ–å¤„ç†ï¼Œä»£ç ç”Ÿæˆç­‰å…·ä½“å·¥ä½œã€‚</p>
<ul>
<li>addEntry, SyncHook,</li>
<li>buildModule, SyncHookï¼Œ è§¦å‘æ—¶æœºæ—¶å¼€å§‹æ„å»ºæ¨¡å—å‰ï¼Œä½œç”¨ä¿®æ”¹æ¨¡å—çš„ loader é…ç½®</li>
<li>successedModule, SyncHook, æ—¶æœºæ¨¡å—æ„å»ºæˆåŠŸåï¼Œåˆ†ææ¨¡å—ä¾èµ–å…³ç³»ã€‚</li>
<li>seal, SyncHook, ç¼–è¯‘ç»“æœå¯†å°å‰ï¼ˆä¸å†ä¿®æ”¹æ¨¡å—ï¼‰ï¼Œæœ€ç»ˆä¼˜åŒ–ä»£ç å— chunk çš„ç»“æ„ã€‚</li>
<li>optimize, SyncHook, å¼€å§‹ä¼˜åŒ–ä»£ç å¦‚ tree-shakingï¼Œ è‡ªå®šä¹‰ä»£ç ä¼˜åŒ–é€»è¾‘ã€‚</li>
<li>afterOptimizeChunks, SyncHook, ä»£ç å— chunk ä¼˜åŒ–å®Œæˆåï¼Œè°ƒæ•´ chunk ç»“æ„å¦‚åˆå¹¶ chunkã€‚</li>
<li>emitAsset, SyncHook, ç”Ÿæˆå•ä¸ªèµ„æºæ–‡ä»¶æ—¶ï¼Œ ä¿®æ”¹èµ„æºå†…å®¹ï¼ˆå¦‚æ·»åŠ ç‰ˆæƒæ³¨é‡Šï¼‰ã€‚</li>
</ul>
<p>å…¶ä»–æ ¸å¿ƒå¯¹è±¡çš„é’©å­ã€‚ Module ç›¸å…³ï¼Œ NormalModule çš„ loader é’©å­ï¼Œæ§åˆ¶ loader æ‰§è¡Œã€‚ chunk ç›¸å…³ï¼Œ ChunkTemplate çš„ render é’©å­ï¼Œæ§åˆ¶ä»£ç å—ç”Ÿæˆé€»è¾‘ã€‚è§£æå™¨ç›¸å…³ï¼Œ Parser çš„ import é’©å­ï¼Œè¯†åˆ« import è¯­æ³•æå–ä¾èµ–ã€‚</p>
<h1 id="ä¸€äº›æºç ç‰‡æ®µ">ä¸€äº›æºç ç‰‡æ®µ <a href="#%e4%b8%80%e4%ba%9b%e6%ba%90%e7%a0%81%e7%89%87%e6%ae%b5" class="anchor">ğŸ”—</a></h1><h2 id="heading"> <a href="#heading" class="anchor">ğŸ”—</a></h2><p>åœ¨ JSDoc é‡Œï¼Œ@typedef ç”¨æ¥å®šä¹‰ä¸€ä¸ª è‡ªå®šä¹‰ç±»å‹ã€‚</p>
<pre tabindex="0"><code class="language-JSDoc" data-lang="JSDoc">/**
 * @typedef {ç±»å‹} åå­—
 */
</code></pre><p>è¿™æ®µ JSDoc æ˜¯ webpack æŠ½è±¡çš„æ–‡ä»¶ç³»ç»Ÿæ¥å£å®šä¹‰ï¼Œæ–¹ä¾¿åˆ‡æ¢ç¡¬ç›˜ fs å’Œå†…å­˜ memfsï¼Œä»è€Œè®© webpack çš„è¾“å‡ºé€»è¾‘å’Œå…·ä½“å­˜å‚¨æ–¹å¼è§£è€¦ã€‚</p>
<pre tabindex="0"><code class="language-JSDoc" data-lang="JSDoc">/**
 * @typedef {object} OutputFileSystem
 * @property {WriteFile} writeFile
 * @property {Mkdir} mkdir
 * @property {Readdir=} readdir
 * @property {Rmdir=} rmdir
 * @property {Unlink=} unlink
 * @property {Stat} stat
 * @property {LStat=} lstat
 * @property {ReadFile} readFile
 * @property {((path1: string, path2: string) =&gt; string)=} join
 * @property {((from: string, to: string) =&gt; string)=} relative
 * @property {((dirname: string) =&gt; string)=} dirname
 */
</code></pre><h2 id="æ’ä»¶å¦‚ä½•ä½¿ç”¨é’©å­">æ’ä»¶å¦‚ä½•ä½¿ç”¨é’©å­ï¼Ÿ <a href="#%e6%8f%92%e4%bb%b6%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8%e9%92%a9%e5%ad%90" class="anchor">ğŸ”—</a></h2><p>æ’ä»¶é€šè¿‡æ³¨å†Œé’©å­ä»‹å…¥åˆ°äº† Webpack çš„ç¼–è¯‘æµç¨‹ä¸­ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// è‡ªå®šä¹‰æ’ä»¶ï¼Œ åœ¨èµ„æºè¾“å‡ºå‰æ·»åŠ ç‰ˆæƒæ³¨é‡Šã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// æ’ä»¶é€šè¿‡applyæ–¹æ³•æ¥æ”¶compilerå®ä¾‹ï¼Œè°ƒç”¨compiler.hooks.xxx.tapAsyncæ³¨å†Œé’©å­ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AddCopyrightPlugin</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">apply</span>(<span style="color:#a6e22e">compiler</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// æ³¨å†ŒCompiler çš„emité’©å­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">compiler</span>.<span style="color:#a6e22e">hooks</span>.<span style="color:#a6e22e">emit</span>.<span style="color:#a6e22e">tapAsync</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;AddCopyrightPlugin&#34;</span>, <span style="color:#75715e">// æ’ä»¶åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      (<span style="color:#a6e22e">compilation</span>, <span style="color:#a6e22e">callback</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// compilation.assets åŒ…å«æ‰€æœ‰å¾…è¾“å‡ºçš„èµ„æºã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Object.<span style="color:#a6e22e">keys</span>(<span style="color:#a6e22e">compilation</span>.<span style="color:#a6e22e">assets</span>).<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">filename</span>) =&gt; {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">filename</span>.<span style="color:#a6e22e">endsWith</span>(<span style="color:#e6db74">&#34;.js&#34;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">source</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">compilation</span>.<span style="color:#a6e22e">assets</span>[<span style="color:#a6e22e">filename</span>].<span style="color:#a6e22e">source</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">withCopyright</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`/* version @2025 xx */\n</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">source</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// æ›´æ–°èµ„æºå†…å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">compilation</span>.<span style="color:#a6e22e">assets</span>[<span style="color:#a6e22e">filename</span>] <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">source</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#a6e22e">withCopyright</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">size</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#a6e22e">withCopyright</span>.<span style="color:#a6e22e">length</span>,
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// å¼‚æ­¥é’©å­éœ€è¦è°ƒç”¨callbackè¡¨ç¤ºå®Œæˆã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">callback</span>();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">plugins</span><span style="color:#f92672">:</span> [<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AddCopyrightPlugin</span>()],
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h1 id="åŸç†">åŸç† <a href="#%e5%8e%9f%e7%90%86" class="anchor">ğŸ”—</a></h1><p>wepack æ ¸å¿ƒä»…å®ç°åŸºç¡€æ‰“åŒ…é€»è¾‘ï¼Œå¤æ‚åŠŸèƒ½éƒ½æ˜¯é€šè¿‡æ’ä»¶+é’©å­å®ç°çš„ã€‚é«˜åº¦å¯æ‰©å±•ï¼Œä½è€¦åˆï¼Œæ ¸å¿ƒæµç¨‹ä¸æ‰©å±•é€»è¾‘åˆ†ç¦»ï¼Œæ’ä»¶æ— éœ€ä¿®æ”¹ webpack æºç å³å¯ä»‹å…¥ä»»æ„é˜¶æ®µã€‚çµæ´»æ€§ï¼Œæ”¯æŒåŒæ­¥ï¼Œå¼‚æ­¥é’©å­ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€è¦ã€‚</p>
<p>webpack çš„é’©å­ç³»ç»ŸåŸºäº tapable çš„äº‹ä»¶é©±åŠ¨æ¶æ„å®ç°</p>
<ul>
<li>æ ¸å¿ƒå¯¹è±¡ Compiler, Compilation ç­‰å®šä¹‰äº†è¦†ç›–å…¨æµç¨‹çš„é’©å­èŠ‚ç‚¹</li>
<li>æ’ä»¶é€šè¿‡ tapï¼ŒtapAsync æ³¨å†Œé’©å­ï¼Œè®¢é˜…äº†äº‹ä»¶ï¼Œæ’å…¥è‡ªå®šä¹‰é€»è¾‘</li>
<li>åœ¨ webpack çš„ç¼–è¯‘å…³é”®èŠ‚ç‚¹è§¦å‘é’©å­èŠ‚ç‚¹ä¸Šçš„äº‹ä»¶ï¼Œè§¦å‘é’©å­ä¸Šæ³¨å†Œçš„æ‰€æœ‰é€»è¾‘ã€‚</li>
</ul>
<h1 id="é‡åˆ°é…ç½®ä¸Šçš„é—®é¢˜">é‡åˆ°é…ç½®ä¸Šçš„é—®é¢˜ <a href="#%e9%81%87%e5%88%b0%e9%85%8d%e7%bd%ae%e4%b8%8a%e7%9a%84%e9%97%ae%e9%a2%98" class="anchor">ğŸ”—</a></h1><h2 id="npm-i">npm i <a href="#npm-i" class="anchor">ğŸ”—</a></h2><pre tabindex="0"><code>npm ERR! code ERESOLVE
npm ERR! ERESOLVE unable to resolve dependency tree
npm ERR!
npm ERR! While resolving: webpack@5.101.3
npm ERR! Found: pug@3.0.3
npm ERR! node_modules/pug
npm ERR!   dev pug@&#34;^3.0.3&#34; from the root project
npm ERR!
npm ERR! Could not resolve dependency:
npm ERR! peer pug@&#34;^2.0.0&#34; from pug-loader@2.4.0
npm ERR! node_modules/pug-loader
npm ERR!   dev pug-loader@&#34;^2.4.0&#34; from the root project
npm ERR!
npm ERR! Fix the upstream dependency conflict, or retry
npm ERR! this command with --force or --legacy-peer-deps
npm ERR! to accept an incorrect (and potentially broken) dependency resolution.
npm ERR!
npm ERR!
npm ERR! For a full report see:
npm ERR! /Users/gonglei/.npm/_logs/2025-09-03T06_51_59_179Z-eresolve-report.txt
</code></pre><pre tabindex="0"><code>npm uninstall pug
npm install pug@2.0.4 --save-dev
npm install
</code></pre><h1 id="ä¸ªäººæ€è€ƒ">ä¸ªäººæ€è€ƒ <a href="#%e4%b8%aa%e4%ba%ba%e6%80%9d%e8%80%83" class="anchor">ğŸ”—</a></h1><h1 id="å‚è€ƒ">å‚è€ƒ <a href="#%e5%8f%82%e8%80%83" class="anchor">ğŸ”—</a></h1>
    </div>

    
        <div class="tags">
            
                <a href="http://brettkk.github.io/tags/%E5%B7%A5%E5%85%B7">å·¥å…·</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <script src="https://utteranc.es/client.js"
repo="brettKK/brettkk.github.io"
issue-term="title"
theme="github-light"
crossorigin="anonymous"
async>
</script>  

    <div class="copyright">
    
       Â© Copyright 
       2025 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-cactus-plus'>nodejh</a>
      </div>
    
</footer>




  </body>
</html>
