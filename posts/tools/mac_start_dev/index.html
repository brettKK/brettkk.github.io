<!DOCTYPE html>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<html lang="zh-cn">
  <head>
    <title>macå®‰è£…å¼€å‘ç¯å¢ƒ | brettkk</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="æ–°ç”µè„‘æ„å»ºå¼€å‘ç¯å¢ƒ ğŸ”— iterm2 brew zsh, ohmyzsh golang, rust vscode hugo github direnv multipass è™šæ‹Ÿæœº å­—ä½“ fira cod">
<meta name="generator" content="Hugo 0.103.1" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/zenburn.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<link rel="stylesheet" href="http://brettkk.github.io/css/syntax.css" />


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />




  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">macå®‰è£…å¼€å‘ç¯å¢ƒ</h1>

    <div class="tip">
        <time datetime="2021-05-05 11:33:56 &#43;0800 CST">May 5, 2021</time>
        <span class="split">
          Â·
        </span>
        <span>
          1867 words
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          4 minute read
        </span>
    </div>

    
    
        
  
    <aside class="toc">
      <details>
          <summary>Table of Contents
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#æ–°ç”µè„‘æ„å»ºå¼€å‘ç¯å¢ƒ">æ–°ç”µè„‘æ„å»ºå¼€å‘ç¯å¢ƒ</a>
      <ul>
        <li><a href="#å®‰è£…ç»ˆç«¯çª—å£å·¥å…·">å®‰è£…ç»ˆç«¯çª—å£å·¥å…·</a></li>
        <li><a href="#å®‰è£…-brew">å®‰è£… brew</a></li>
        <li><a href="#å®‰è£…-golang">å®‰è£… golang</a></li>
        <li><a href="#å®‰è£…-vscode">å®‰è£… vscode</a></li>
        <li><a href="#å®‰è£…-blogç³»ç»Ÿ">å®‰è£… blogç³»ç»Ÿ</a></li>
        <li><a href="#æœ¬åœ°é…ç½®githubè®¿é—®æƒé™">æœ¬åœ°é…ç½®GitHubè®¿é—®æƒé™</a></li>
        <li><a href="#direnv">direnv</a></li>
      </ul>
    </li>
    <li><a href="#macä¸Šå®‰è£…å’Œä½¿ç”¨è™šæ‹Ÿæœº">macä¸Šå®‰è£…å’Œä½¿ç”¨è™šæ‹Ÿæœº</a>
      <ul>
        <li><a href="#why-need-it">why need it?</a></li>
        <li><a href="#å…¶ä»–å¹³å°çš„æ–¹æ¡ˆ">å…¶ä»–å¹³å°çš„æ–¹æ¡ˆ</a></li>
        <li><a href="#macos-m1ä¸‹å®‰è£…è™šæ‹Ÿæœº">macos m1ä¸‹å®‰è£…è™šæ‹Ÿæœº</a></li>
        <li><a href="#macos-m1-arch">macos m1 arch</a></li>
        <li><a href="#é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</a></li>
      </ul>
    </li>
    <li><a href="#githubè¿æ¥ä¸Šçš„é—®é¢˜">githubè¿æ¥ä¸Šçš„é—®é¢˜</a>
      <ul>
        <li><a href="#å…¶ä»–">å…¶ä»–</a></li>
      </ul>
    </li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


    


    <div class="content">
      <h1 id="æ–°ç”µè„‘æ„å»ºå¼€å‘ç¯å¢ƒ">æ–°ç”µè„‘æ„å»ºå¼€å‘ç¯å¢ƒ <a href="#%e6%96%b0%e7%94%b5%e8%84%91%e6%9e%84%e5%bb%ba%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83" class="anchor">ğŸ”—</a></h1><ul>
<li>iterm2</li>
<li>brew</li>
<li>zsh, ohmyzsh</li>
<li>golang, rust</li>
<li>vscode</li>
<li>hugo</li>
<li>github</li>
<li>direnv</li>
<li>multipass è™šæ‹Ÿæœº</li>
<li>å­—ä½“ fira codeï¼Œ cascadia code, jetbrains mono.</li>
</ul>
<h2 id="å®‰è£…ç»ˆç«¯çª—å£å·¥å…·">å®‰è£…ç»ˆç«¯çª—å£å·¥å…· <a href="#%e5%ae%89%e8%a3%85%e7%bb%88%e7%ab%af%e7%aa%97%e5%8f%a3%e5%b7%a5%e5%85%b7" class="anchor">ğŸ”—</a></h2><p>ä¸‹è½½åœ°å€ï¼šhttps://iterm2.com/</p>
<h2 id="å®‰è£…-brew">å®‰è£… brew <a href="#%e5%ae%89%e8%a3%85-brew" class="anchor">ğŸ”—</a></h2><p>/bin/bash -c &quot;$(curl -fsSL <a href="https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install.sh%29%22" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install.sh)"</a><br>
å®‰è£…ï¼Œåˆ‡æ¢ä¸ºzshï¼Œå¹¶å®‰è£…oh my zsh -- shellè¾…åŠ©å·¥å…·<br>
å¯èƒ½é‡åˆ°çš„é—®é¢˜</p>
<pre tabindex="0"><code>sh -c &#34;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&#34;
curl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused
è§£å†³æ–¹å¼ï¼š https://github.com/ohmyzsh/ohmyzsh/issues/9465
</code></pre><h2 id="å®‰è£…-golang">å®‰è£… golang <a href="#%e5%ae%89%e8%a3%85-golang" class="anchor">ğŸ”—</a></h2><p><a href="https://golang.org/doc/install" target="_blank" rel="noopener">https://golang.org/doc/install</a></p>
<p><a href="https://sourabhbajaj.com/mac-setup/Go/README.html" target="_blank" rel="noopener">https://sourabhbajaj.com/mac-setup/Go/README.html</a></p>
<p>vim .bashrc</p>
<p>export GOPATH=$HOME/go-workspace # don't forget to change your path correctly!
export GOROOT=/usr/local/opt/go/libexec
export PATH=$PATH:$GOPATH/bin
export PATH=$PATH:$GOROOT/bin</p>
<h2 id="å®‰è£…-vscode">å®‰è£… vscode <a href="#%e5%ae%89%e8%a3%85-vscode" class="anchor">ğŸ”—</a></h2><p><a href="https://code.visualstudio.com/docs/setup/mac" target="_blank" rel="noopener">https://code.visualstudio.com/docs/setup/mac</a></p>
<p>æ’ä»¶</p>
<h2 id="å®‰è£…-blogç³»ç»Ÿ">å®‰è£… blogç³»ç»Ÿ <a href="#%e5%ae%89%e8%a3%85-blog%e7%b3%bb%e7%bb%9f" class="anchor">ğŸ”—</a></h2><p>Brew install Hugo</p>
<p>git pull origin master --allow-unrelated-histories</p>
<p>git submodule update --init --recursive</p>
<h2 id="æœ¬åœ°é…ç½®githubè®¿é—®æƒé™">æœ¬åœ°é…ç½®GitHubè®¿é—®æƒé™ <a href="#%e6%9c%ac%e5%9c%b0%e9%85%8d%e7%bd%aegithub%e8%ae%bf%e9%97%ae%e6%9d%83%e9%99%90" class="anchor">ğŸ”—</a></h2><p>åœ¨ï½ä¸‹åˆ›å»º.sshæ–‡ä»¶å¤¹ ssh-keygen -t rsa -C â€œxxx@xx.com&quot;
å°†å…¬é’¥æ·»åŠ åˆ°github</p>
<p>go env -w GOPROXY=https://goproxy.cn</p>
<h2 id="direnv">direnv <a href="#direnv" class="anchor">ğŸ”—</a></h2><p>æ ¹æ®æ–‡ä»¶å¤¹ä¸‹çš„.envrc ä¸´æ—¶æ”¹envå˜é‡ã€‚</p>
<h1 id="macä¸Šå®‰è£…å’Œä½¿ç”¨è™šæ‹Ÿæœº">macä¸Šå®‰è£…å’Œä½¿ç”¨è™šæ‹Ÿæœº <a href="#mac%e4%b8%8a%e5%ae%89%e8%a3%85%e5%92%8c%e4%bd%bf%e7%94%a8%e8%99%9a%e6%8b%9f%e6%9c%ba" class="anchor">ğŸ”—</a></h1><h2 id="why-need-it">why need it? <a href="#why-need-it" class="anchor">ğŸ”—</a></h2><p><font color=blue> å› ä¸ºä½¿ç”¨çš„æ˜¯macç¬”è®°æœ¬ï¼Œå®éªŒå’Œå¼€å‘ä¸Šéœ€è¦åˆ©ç”¨linuxç¯å¢ƒä¸‹çš„å·¥å…·ï¼ˆå¦‚gccï¼Œgdbä¹‹ç±»ï¼‰ï¼Œæ‰€ä»¥åœ¨macçš„å®¿ä¸»æœºä¸Šè™šæ‹ŸåŒ–å‡ºlinuxå¾ˆæœ‰å¿…è¦ã€‚ </font><br></p>
<h2 id="å…¶ä»–å¹³å°çš„æ–¹æ¡ˆ">å…¶ä»–å¹³å°çš„æ–¹æ¡ˆ <a href="#%e5%85%b6%e4%bb%96%e5%b9%b3%e5%8f%b0%e7%9a%84%e6%96%b9%e6%a1%88" class="anchor">ğŸ”—</a></h2><p>windowsä¸‹ vscode å®‰è£…Windows Subsystem for Linux (WSL)æ’ä»¶ï¼Œå³å¯</p>
<p>VirtualBox supports only x86 hardware.</p>
<p>Ubuntu is available not only on x86 architectures, but also has ARM-based versions.</p>
<p>VMWare è™šæ‹Ÿæœºäº§å“ï¼ˆä»˜è´¹ï¼‰ã€‚</p>
<h2 id="macos-m1ä¸‹å®‰è£…è™šæ‹Ÿæœº">macos m1ä¸‹å®‰è£…è™šæ‹Ÿæœº <a href="#macos-m1%e4%b8%8b%e5%ae%89%e8%a3%85%e8%99%9a%e6%8b%9f%e6%9c%ba" class="anchor">ğŸ”—</a></h2><ul>
<li>macbookçš„æŒ‡ä»¤é›† uname -a or uname -m
<ul>
<li>æ–°m1èŠ¯ç‰‡ä¸‹æ˜¯arm64</li>
<li>è€intelèŠ¯ç‰‡ä¸‹æ˜¯x86_64</li>
</ul>
</li>
</ul>
<p>åœ¨m1 archä¸‹ virtual boxå’ŒVMWareè™šæ‹Ÿæœºäº§å“ä¸æ”¯æŒã€‚</p>
<h2 id="macos-m1-arch">macos m1 arch <a href="#macos-m1-arch" class="anchor">ğŸ”—</a></h2><p>multipass å¯ä»¥æ”¯æŒåœ¨macosä¸‹è™šæ‹ŸåŒ–å‡ºubuntuæ“ä½œç³»ç»Ÿï¼ŒåŸºæœ¬ä¸Šæ»¡è¶³äº†å¼€å‘éœ€æ±‚ã€‚</p>
<p>multipass find</p>
<p>multipass launch 22.04 -n primary -c 2 -m 4G -d 50G</p>
<p>multipass list æŸ¥çœ‹è™šæ‹ŸæœºIP</p>
<p>multipass shell</p>
<p>sudo apt install ubuntu-desktop xrdp -y</p>
<p>vsocde sshåˆ°æœ¬åœ°è™šæ‹ŸåŒ–å‡ºæ¥çš„ubuntuç³»ç»Ÿã€‚</p>
<h2 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜ <a href="#%e9%81%87%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98" class="anchor">ğŸ”—</a></h2><p><strong>macçš„hostæœºå™¨ç™»é™†åˆ°multipassè™šæ‹Ÿæœºæ—¶å…¬é’¥è®¾ç½®çš„é—®é¢˜ã€‚</strong></p>
<pre tabindex="0"><code>#ssh ubuntu@192.168.64.2
ubuntu@192.168.64.2: Permission denied (publickey).

# ssh ubuntu@192.168.64.3
Load key &#34;.ssh/id_rsa.pub&#34; invalid format 
ubuntu@192.168.64.3: Permission denied (publickey).
</code></pre><p>åŸå› ï¼š åœ¨å®¿ä¸»æœº~/.ssh/configä¸­ IdentityFile ~/.ssh/id_rsa.pubã€‚ é…ç½®é”™è¯¯ã€‚
å…¬é’¥é…ç½®åœ¨vmçš„~/.ssh/authorized_keysä¸­ã€‚ åœ¨å®¿ä¸»æœºä¸Šsshæ—¶åˆ©ç”¨ç§é’¥è¿›è¡Œç™»é™†è®¤è¯ã€‚
æ‰€ä»¥åœ¨å®¿ä¸»æœºIdentityFile ~/.ssh/id_rsa.pub -&gt; IdentityFile ~/.ssh/id_rsaï¼ˆç§é’¥ï¼‰ã€‚</p>
<pre tabindex="0"><code>é€šè¿‡mulipass clienté‡Œopen shellæ‰“å¼€primary å®ä¾‹ï¼Œå¯èƒ½å‡ºç°
Can&#39;t open instance, stuck in Starting phaseã€‚
</code></pre><p>åŸå› ï¼š ä¸Šä¸€éƒ¨ä¿®æ”¹ubuntuä¸­~/.ssh/authorized_keysæ—¶ä¸æ˜¯é‡‡ç”¨çš„appendæ–°public keyï¼Œé‡‡ç”¨è¦†ç›–ã€‚
æ‰€ä»¥åœ¨ä¿®æ”¹authorized_keysæ—¶åŸæœ‰public keyæœ€å¥½backupä¸€ä»½ã€‚
æ‰“å¼€è¿œç¨‹çš„æ–‡ä»¶å¤¹åŒ…å«å¤§é‡æ–‡ä»¶æ—¶ï¼ˆä¾‹å¦‚æ‰“å¼€linux kernelæ–‡ä»¶å¤¹ä»£ç ï¼‰ï¼Œå‡ºç°Connection to server got closed. Server will not be restartedã€‚</p>
<p><strong> vsæ‰“å¼€è™šæ‹Ÿæœºé‡Œçš„å¤§æ–‡ä»¶æ—¶å‡ºç°çš„é—®é¢˜ </strong></p>
<pre tabindex="0"><code>Visual Studio Code is unable to watch for file changes in this large workspace&#34; (error ENOSPC).

è§£å†³åŠæ³•å‚è€ƒï¼šhttps://code.visualstudio.com/docs/setup/linux#_visual-studio-code-is-unable-to-watch-for-file-changes-in-this-large-workspace-error-enospc
</code></pre><hr>
<p><strong>åœ¨multipassä¸­é˜…è¯»linuxä»£ç å‡ºç°çš„ç©ºé—´ä¸è¶³é—®é¢˜</strong></p>
<pre tabindex="0"><code>åœ¨linux-5.19ä¸‹
ubuntu$ ctags -R
no left space on disk.

å°è¯•è°ƒæ•´è™šæ‹Ÿæœºçš„diskèµ„æºé™åˆ¶ã€‚ 
sudo vim /var/root/Library/Application\ Support/multipassd/qemu/multipassd-vm-instances.json
æ›´æ”¹primaryçš„diské™åˆ¶ï¼Œé‡å¯å¯åŠ¨vmåä¸èµ·ä½œç”¨ã€‚

æ¥ç€å°è¯•ï¼š
 sudo  /Library/Application\ Support/com.canonical.multipass/bin/qemu-img info /var/root/Library/Application\ Support/multipassd/qemu/vault/instances/primary/ubuntu-22.04-server-cloudimg-arm64.img

 sudo  /Library/Application\ Support/com.canonical.multipass/bin/qemu-img snapshot -d suspend  /var/root/Library/Application\ Support/multipassd/qemu/vault/instances/primary/ubuntu-22.04-server-cloudimg-arm64.img

 sudo  /Library/Application\ Support/com.canonical.multipass/bin/qemu-img resize /var/root/Library/Application\ Support/multipassd/qemu/vault/instances/primary/ubuntu-22.04-server-cloudimg-arm64.img +10G

 Image resized.
</code></pre><p><a href="https://multipass.run/docs/modify-an-instance#heading--set-the-cpu-ram-or-disk-of-an-instance" target="_blank" rel="noopener">https://multipass.run/docs/modify-an-instance#heading--set-the-cpu-ram-or-disk-of-an-instance</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/435237515" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/435237515</a>
launch failed: cannot connect to the multipass socket
è§£å†³åŠæ³•ï¼šsudo launchctl load /Library/LaunchDaemons/com.canonical.multipassd.plist</p>
<p>image resizedæˆåŠŸï¼Œä½†æ˜¯disk sizeä»ç„¶æ˜¯5Gã€‚</p>
<pre tabindex="0"><code class="language-English" data-lang="English">// make menuconfig
problemï¼šUnable to find the ncurses libraries
solvedï¼š sudo apt-get install ncurses-dev
</code></pre><pre tabindex="0"><code>ubuntu@brett:~/linux-master$ make
  SYNC    include/config/auto.conf.cmd
  CALL    scripts/checksyscalls.sh
  HOSTCC  certs/extract-cert
certs/extract-cert.c:21:10: fatal error: openssl/bio.h: No such file or directory
   21 | #include &lt;openssl/bio.h&gt;
      |          ^~~~~~~~~~~~~~~
compilation terminated.
make[2]: *** [scripts/Makefile.host:111: certs/extract-cert] Error 1
make[1]: *** [scripts/Makefile.build:500: certs] Error 2
make: *** [Makefile:1990: .] Error 2

solved: https://github.com/TinkerBoard/debian_kernel/issues/26
</code></pre><p>makeè¿›è¡Œkernelçš„ç¼–è¯‘ï¼Œä¹‹åä¼šç­‰ä¸€ä¼š...</p>
<pre tabindex="0"><code>  LD [M]  sound/soc/tegra/snd-soc-tegra210-sfc.ko
  OBJCOPY arch/arm64/boot/Image
  GZIP    arch/arm64/boot/Image.gz
  ubuntu@brett:~/linux-master$ file arch/arm64/boot/Image
arch/arm64/boot/Image: Linux kernel ARM64 boot executable Image, little-endian, 4K pages
</code></pre><h1 id="githubè¿æ¥ä¸Šçš„é—®é¢˜">githubè¿æ¥ä¸Šçš„é—®é¢˜ <a href="#github%e8%bf%9e%e6%8e%a5%e4%b8%8a%e7%9a%84%e9%97%ae%e9%a2%98" class="anchor">ğŸ”—</a></h1><pre tabindex="0"><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the RSA key sent by the remote host is
SHA256:.....
Please contact your system administrator.
Add correct host key in /Users/brettkk/.ssh/known_hosts to get rid of this message.
Offending RSA key in /Users/brettkk/.ssh/known_hosts:2
Host key for [ssh.github.com]:443 has changed and you have requested strict checking.
Host key verification failed.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
</code></pre><p>è§£å†³åŠæ³•ï¼š åˆ é™¤ <code>~/.ssh/known_hosts</code>ä¸­çš„githubé‚£å‡ è¡Œé…ç½®, å†pullä¸‹ã€‚</p>
<h2 id="å…¶ä»–">å…¶ä»– <a href="#%e5%85%b6%e4%bb%96" class="anchor">ğŸ”—</a></h2><p>æœ¬åœ°å®‰è£…ä»˜è´¹çš„è™šæ‹Ÿæœºã€‚<br>
è´­ä¹°äº‘ä¸»æœºï¼Œ ä¾‹å¦‚è…¾è®¯äº‘çš„è½»é‡åº”ç”¨æœåŠ¡å™¨ã€‚</p>

    </div>

    
        <div class="tags">
            
                <a href="http://brettkk.github.io/tags/%E5%B7%A5%E5%85%B7">å·¥å…·</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <script src="https://utteranc.es/client.js"
repo="brettKK/brettkk.github.io"
issue-term="title"
theme="github-light"
crossorigin="anonymous"
async>
</script>  

    <div class="copyright">
    
       Â© Copyright 
       2026 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-cactus-plus'>nodejh</a>
      </div>
    
</footer>




  </body>
</html>
