<!DOCTYPE html>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<html lang="zh-cn">
  <head>
    <title>å‰ç«¯æ¡†æ¶-react | brettkk</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="react ğŸ”—react æ˜¯ä¸€ä¸ª js çš„åº“ï¼Œ ç®€åŒ– html å’Œ js æ“ä½œ dom çš„å¼€å‘è¿‡ç¨‹ã€‚ æ ¸å¿ƒ">
<meta name="generator" content="Hugo 0.103.1" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/zenburn.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<link rel="stylesheet" href="http://brettkk.github.io/css/syntax.css" />


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />




  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">å‰ç«¯æ¡†æ¶-react</h1>

    <div class="tip">
        <time datetime="2025-03-05 11:33:56 &#43;0800 CST">Mar 5, 2025</time>
        <span class="split">
          Â·
        </span>
        <span>
          1880 words
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          4 minute read
        </span>
    </div>

    
    
        
  
    <aside class="toc">
      <details>
          <summary>Table of Contents
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#react">react</a></li>
    <li><a href="#æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ</a>
      <ul>
        <li><a href="#react-hooks">react hooks</a></li>
        <li><a href="#hooks-çš„å®ç°åŸç†">hooks çš„å®ç°åŸç†</a></li>
        <li><a href="#state-management">state management</a></li>
        <li><a href="#effect-hooks">effect hooks</a></li>
        <li><a href="#ref-hooks">ref hooks</a></li>
        <li><a href="#performance-hooks">performance hooks</a></li>
        <li><a href="#context-hooks">context hooks</a></li>
        <li><a href="#transition-hooks">transition hooks</a></li>
        <li><a href="#random-hooks">random hooks</a></li>
        <li><a href="#react-19-hooks">react 19 hooks</a></li>
      </ul>
    </li>
    <li><a href="#å•æ­¥è°ƒè¯•-react-çš„å…¥å£">å•æ­¥è°ƒè¯• react çš„å…¥å£</a>
      <ul>
        <li><a href="#åŸç†">åŸç†</a>
          <ul>
            <li><a href="#react-compiler">react compiler</a></li>
            <li><a href="#jsx-tsx-å¦‚ä½•å˜æˆ-dom-çš„">JSXï¼Œ tsx å¦‚ä½•å˜æˆ DOM çš„ï¼Ÿ</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#react-ä¸-vue-çš„å¯¹æ¯”">react ä¸ vue çš„å¯¹æ¯”</a></li>
    <li><a href="#procomponents">Procomponents</a>
      <ul>
        <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
      </ul>
    </li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


    


    <div class="content">
      <h1 id="react">react <a href="#react" class="anchor">ğŸ”—</a></h1><p>react æ˜¯ä¸€ä¸ª js çš„åº“ï¼Œ ç®€åŒ– html å’Œ js æ“ä½œ dom çš„å¼€å‘è¿‡ç¨‹ã€‚ æ ¸å¿ƒæ˜¯ç®¡ç†ç»„ä»¶ <code>make components</code>ï¼Œç®¡ç†çŠ¶æ€ <code>manage state</code>ã€‚ <br>
react ä¸­å¼•å…¥<code>Flow</code> æ˜¯ä¸€ä¸ªé™æ€ç±»å‹æ£€æŸ¥å™¨ï¼Œç”¨äºåœ¨ JavaScript ä¸­å¼•å…¥é™æ€ç±»å‹ã€‚<code>https://github.com/facebook/react</code></p>
<ul>
<li>react æ ¸å¿ƒæ¦‚å¿µå¿«é€Ÿå…¥é—¨
<ul>
<li>JQuery æ˜¯å‘½ä»¤å¼åº“ï¼ˆéœ€è¦æŒ‡æ˜æ¯ä¸€æ­¥çš„å‘½ä»¤ï¼‰ï¼Œ React æ˜¯å£°æ˜å¼åº“ã€‚</li>
<li>UI = f(data), data = props + state.</li>
</ul>
</li>
<li>Fiber ç»“æ„
<ul>
<li>å®ç°å¼‚æ­¥å¯ä¸­æ–­çš„æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶ã€‚</li>
</ul>
</li>
<li>VirtualDOM
<ul>
<li>ä¼˜åŠ¿ï¼š ä¸ç”¨å…·ä½“è€ƒè™‘ DOM æ“ä½œï¼Œå¯ä»¥ç”¨ç”³æ˜å¼çš„æ–¹å¼å†™ä»£ç ï¼›å‡å°‘é¡µé¢æ¸²æŸ“æ¬¡æ•°ï¼›æ›´å¥½çš„è·¨å¹³å°èƒ½åŠ›ã€‚</li>
</ul>
</li>
<li>Diff ç®—æ³•</li>
<li>Hooks
<ul>
<li>useState è®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›ã€‚</li>
</ul>
</li>
</ul>
<h1 id="æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ <a href="#%e6%a0%b8%e5%bf%83%e6%a6%82%e5%bf%b5" class="anchor">ğŸ”—</a></h1><p><code>component ç»„ä»¶</code>æ˜¯å‡½æ•°çš„å®šä¹‰ï¼Œå‡½æ•°è¿”å›ä¸€ç»„ hmtl æ ‡ç­¾ï¼ˆJSXï¼‰ã€‚<br>
<code>JSX</code> æ˜¯ js+htmlï¼Œå±æ€§åç§°ä¸º<code>camelCase</code>, ä¸æ˜¯<code>HTML attributes</code>ï¼Œ ä¸€ç§æ›´è‡ªç„¶çš„æ–¹å¼åˆ›å»º react elementã€‚ <br>
<code>jsx</code> ä¼š <code>babel</code> è¢«ç¿»è¯‘ä¸º<code>React.createElement</code>å‡½æ•°ï¼Œè¿”å› js å¯¹è±¡ï¼ˆ VDOMï¼‰ã€‚<br>
<code>babel</code>å¯ä»¥å°† JSX è½¬è¯‘ä¸ºç­‰ä»·çš„ js ä»£ç ã€‚<br></p>
<p>html ä¸º<code>&lt;button class=&quot;btn&quot;&gt;</code> , jsx ä¸º<code>&lt;button className=&quot;btn&quot;&gt;</code></p>
<hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;Greeting text={&#39;yo&#39;} /&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Greeting</span>(<span style="color:#a6e22e">props</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">h1</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">text</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/h1&gt;;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;Parent&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  &lt;Child /&gt;    // passed as &#34;children&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;/Parent&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Parent</span>(<span style="color:#a6e22e">props</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">children</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç»„ä»¶çš„å†…å®¹æ˜¯â€œæ’æ§½â€ã€‚ ä¾‹å¦‚ Vue.jsã€‚åœ¨ React ä¸­ï¼Œé€šå¸¸ç§°å…¶ä¸º &quot;children&quot;ã€‚éƒ½æ˜¯æŒ‡å°†æŸäº›å†…å®¹æˆ–å…ƒç´ æ’å…¥åˆ°å­ç»„ä»¶çš„æŒ‡å®šä½ç½®ã€‚</p>
<p>ç»„ä»¶çš„å±æ€§ï¼ŒçŠ¶æ€ï¼Œäº‹ä»¶ã€‚</p>
<p>ç»„ä»¶é€šè®¯:</p>
<ul>
<li>é€šè¿‡ç»„ä»¶çš„å±æ€§ propsï¼Œ å•å‘æ•°æ®æµ(pass data into another component)ã€‚
<ul>
<li>çˆ¶-&gt;å­ï¼Œpropsï¼Œ å°† jsx ä¼ ç»™å­ç»„ä»¶ï¼ˆæ’æ§½ï¼‰</li>
<li>å­-&gt;çˆ¶ï¼Œå­è°ƒçˆ¶ä¼ è¿›æ¥çš„å‡½æ•°</li>
</ul>
</li>
<li>context hook å¤šç»„ä»¶å…±äº«çŠ¶æ€</li>
</ul>
<p><code>React Hooks</code>ï¼š useState, useContext, useRef, useEffectã€‚</p>
<p>çŠ¶æ€ç®¡ç†ã€‚</p>
<p>æ¸²æŸ“æµç¨‹ã€‚</p>
<p>é¿å…é‡å¤æ¸²æŸ“ã€‚</p>
<h2 id="react-hooks">react hooks <a href="#react-hooks" class="anchor">ğŸ”—</a></h2><p>hook æ˜¯ react 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚</p>
<p>æ¯ä¸ªç»„ä»¶æœ‰ä¸€ä¸ª js å¯¹è±¡ï¼ˆfiber å¯¹è±¡ï¼‰é‡Œå­˜ hook çš„é“¾è¡¨ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">//react/packages/react-reconciler/src/ReactFiberHooks.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Hook</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">memoizedState</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">baseState</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">baseQueue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Update</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">any</span>, <span style="color:#a6e22e">any</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">queue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">next</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Hook</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="hooks-çš„å®ç°åŸç†">hooks çš„å®ç°åŸç† <a href="#hooks-%e7%9a%84%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">_state</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myUseState</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">initialValue</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">_state</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_state</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">undefined</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">initialValue</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">_state</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">setState</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">newValue</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">_state</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newValue</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">render</span>();
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> [<span style="color:#a6e22e">_state</span>, <span style="color:#a6e22e">setState</span>];
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>hooks åˆ©ç”¨ js çš„é—­åŒ…å®ç°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">_state</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å®é™…ä¸èƒ½å®šä¹‰åœ¨å…¨å±€ï¼Œå…¶ä»–ç»„ä»¶æ€ä¹ˆåŠï¼Ÿ ç»™æ¯ä¸ªç»„ä»¶åˆ›å»ºä¸€ä¸ª_stateæ•°ç»„å’Œindexï¼Œ å¹¶æ”¾åœ¨ç»„ä»¶å¯¹åº”çš„Fiber Nodeä¸Šã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myUseState</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">initialState</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">currentIndex</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">index</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">_state</span>[<span style="color:#a6e22e">currentIndex</span>] <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">_state</span>[<span style="color:#a6e22e">currentIndex</span>] <span style="color:#f92672">===</span> <span style="color:#66d9ef">undefined</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">initialState</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">_state</span>[<span style="color:#a6e22e">currentIndex</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">setState</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">newValue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">_state</span>[<span style="color:#a6e22e">currentIndex</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">newValue</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">render</span>(); <span style="color:#75715e">// é‡ç½®indexä¸º0ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">index</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> [<span style="color:#a6e22e">_state</span>[<span style="color:#a6e22e">currentIndex</span>], <span style="color:#a6e22e">setState</span>];
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>ä¸ºä»€ä¹ˆ react hooks çš„ä½¿ç”¨è§„åˆ™ä¸­ä¸èƒ½å†å¾ªç¯ï¼Œæ¡ä»¶ä¸­è°ƒç”¨ hook å‡½æ•°äº†ï¼Ÿ å› ä¸º hooks å‡½æ•°çš„å­˜å‚¨æ–¹å¼æ˜¯æ•°ç»„ï¼ˆå®é™…æ˜¯é“¾è¡¨ï¼‰ï¼Œ åŠ å…¥æ§åˆ¶æµåï¼Œéœ€è¦é€šè¿‡ index è·å–å¯¹åº”çš„ stateï¼Œ setState å°±å…³ç³»å°±é”™äº†ã€‚</p>
<hr>
<p>fiber å¯¹è±¡å®ç°äº†çŠ¶æ€æ›´æ–°æœºåˆ¶ï¼Œæ”¯æŒä»»åŠ¡ä¸åŒä¼˜å…ˆçº§ï¼Œå¯ä¸­æ–­ä¸æ¢å¤ã€‚æ¯ä¸ªä»»åŠ¡æ›´æ–°å•å…ƒä¸º react element å¯¹åº”çš„ fiber èŠ‚ç‚¹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">FiberNode</span>(
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tag</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">WorkTag</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pendingProps</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mixed</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">key</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">string</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mode</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">TypeOfMode</span>
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// é™æ€å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tag</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">tag</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">key</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">stateNode</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>; <span style="color:#75715e">// å¯¹åº”çš„DOMèŠ‚ç‚¹ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">memoizedState</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>; <span style="color:#75715e">// å¯¹åº”çš„hooksé“¾è¡¨ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// è¿æ¥å…¶ä»–fiberèŠ‚ç‚¹å½¢æˆFiberæ ‘
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#66d9ef">return</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>; <span style="color:#75715e">// çˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">child</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>; <span style="color:#75715e">// å­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sibling</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>; <span style="color:#75715e">// å…„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">ref</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// åŠ¨æ€å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">pendingProps</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pendingProps</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">memoizedProps</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">updateQueue</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">memoizedState</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dependencies</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// ä¿å­˜æ›´æ–°æ—¶é€ æˆçš„DOMæ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">effectTag</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">NoEffect</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">nextEffect</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">firstEffect</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastEffect</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// æ›´æ–°æ—¶å¯¹åº”çš„fiberï¼Œ åŒç¼“å­˜ã€‚ æ›´æ–°æ—¶æŒ‡å‘workInProgress Fiber èŠ‚ç‚¹ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">alternate</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="state-management">state management <a href="#state-management" class="anchor">ğŸ”—</a></h2><p>useStateï¼ˆå¸¸ç”¨ï¼‰, useReducer, useSyncExternalStore</p>
<h2 id="effect-hooks">effect hooks <a href="#effect-hooks" class="anchor">ğŸ”—</a></h2><p>useEffectï¼ˆå¸¸ç”¨ï¼‰, useLayoutEffect, useInsertionEffect</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">import</span>  <span style="color:#a6e22e">React</span>, {<span style="color:#a6e22e">useEffect</span>, <span style="color:#a6e22e">useState</span>} <span style="color:#a6e22e">rom</span> <span style="color:#e6db74">&#39;react&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> {<span style="color:#a6e22e">Link</span>} <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;react-router-dom&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Demo() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">count</span>, <span style="color:#a6e22e">setCount</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#a6e22e">count</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;2&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;3&#39;</span>, <span style="color:#a6e22e">count</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;4&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }, []);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;5&#39;</span>, <span style="color:#a6e22e">count</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;6&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }, [<span style="color:#a6e22e">count</span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">p</span>&gt;<span style="color:#a6e22e">count</span> <span style="color:#66d9ef">is</span><span style="color:#f92672">:</span> {<span style="color:#a6e22e">count</span>}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{() <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">setCount</span>(<span style="color:#a6e22e">count</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)}&gt;<span style="color:#a6e22e">add</span>&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">Link</span> <span style="color:#a6e22e">to</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/management&#34;</span>&gt;<span style="color:#a6e22e">About</span>&lt;/<span style="color:#f92672">Link</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> <span style="color:#a6e22e">Demo</span>;
</span></span></code></pre></div><p>åˆå§‹åŒ–æ—¶æ‰§è¡Œæ‰€æœ‰ useEffect çš„ä¸»ä½“å‡½æ•°ã€‚
çŠ¶æ€æ›´æ–°æ—¶ï¼š å…ˆæ‰§è¡Œä¾èµ–å˜åŒ–çš„ useEffect çš„æ¸…ç†å‡½æ•°ï¼Œ å†æ‰§è¡Œä¸»ä½“å‡½æ•°ã€‚
ç»„ä»¶å¸è½½æ—¶ï¼š æ‰§è¡Œæ¸…ç†å‡½æ•°ã€‚</p>
<p>åˆå§‹åŒ–æ¸²æŸ“ï¼ˆç»„ä»¶æŒ‚è½½ï¼‰ 10 30 50
ç‚¹å‡» add æŒ‰é’® 2 6 11 51
ç‚¹å‡»è·³è½¬æŒ‰é’® 2 4 6</p>
<h2 id="ref-hooks">ref hooks <a href="#ref-hooks" class="anchor">ğŸ”—</a></h2><p>useRef, useImperativeHandle</p>
<h2 id="performance-hooks">performance hooks <a href="#performance-hooks" class="anchor">ğŸ”—</a></h2><p>unnecessary in react 19 .
useMemo, useCallback</p>
<h2 id="context-hooks">context hooks <a href="#context-hooks" class="anchor">ğŸ”—</a></h2><p>useContextï¼ˆå¸¸ç”¨ï¼‰</p>
<h2 id="transition-hooks">transition hooks <a href="#transition-hooks" class="anchor">ğŸ”—</a></h2><p>useTransition, useDeferredValue</p>
<h2 id="random-hooks">random hooks <a href="#random-hooks" class="anchor">ğŸ”—</a></h2><p>useDebugValue, useId</p>
<h2 id="react-19-hooks">react 19 hooks <a href="#react-19-hooks" class="anchor">ğŸ”—</a></h2><p>useFormStatus, useFormState, useOptimistic, use</p>
<h1 id="å•æ­¥è°ƒè¯•-react-çš„å…¥å£">å•æ­¥è°ƒè¯• react çš„å…¥å£ <a href="#%e5%8d%95%e6%ad%a5%e8%b0%83%e8%af%95-react-%e7%9a%84%e5%85%a5%e5%8f%a3" class="anchor">ğŸ”—</a></h1><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">App</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;./App&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">createRoot</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;react-dom/client&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">container</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;root&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">root</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createRoot</span>(<span style="color:#a6e22e">container</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">root</span>.<span style="color:#a6e22e">render</span>(&lt;<span style="color:#f92672">App</span> /&gt;);
</span></span></code></pre></div><p><code>cmd+shift+d</code> æ‰“å¼€ vs code è°ƒè¯•é¢æ¿ï¼Œåˆ›å»º launch.json æ–‡ä»¶ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;0.2.0&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;configurations&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;chrome&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;request&#34;</span>: <span style="color:#e6db74">&#34;launch&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;é’ˆå¯¹ localhost å¯åŠ¨ Chrome&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;http://localhost:3000&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;webRoot&#34;</span>: <span style="color:#e6db74">&#34;${workspaceFolder}/src&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;sourceMaps&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;skipFiles&#34;</span>: [<span style="color:#e6db74">&#34;&lt;node_internals&gt;/**&#34;</span>]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿è¡Œå’Œè°ƒè¯•â€œé’ˆå¯¹ localhost å¯åŠ¨ Chromeâ€ï¼Œå³å¯ debug ç¨‹åºã€‚</p>
<h2 id="åŸç†">åŸç† <a href="#%e5%8e%9f%e7%90%86" class="anchor">ğŸ”—</a></h2><p>æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<h3 id="react-compiler">react compiler <a href="#react-compiler" class="anchor">ğŸ”—</a></h3><p>2024 å¹´åœ¨å¼€æºå®éªŒä¸­ã€‚ å­¦ä¹ ä¸€ä¸‹ compiler çš„è®¾è®¡ä¸å®ç°ã€‚</p>
<h3 id="jsx-tsx-å¦‚ä½•å˜æˆ-dom-çš„">JSXï¼Œ tsx å¦‚ä½•å˜æˆ DOM çš„ï¼Ÿ <a href="#jsx-tsx-%e5%a6%82%e4%bd%95%e5%8f%98%e6%88%90-dom-%e7%9a%84" class="anchor">ğŸ”—</a></h3><p>TSX
â†“ ç¼–è¯‘ï¼ˆTS â†’ JSX â†’ JSï¼‰
React.createElement()
â†“
Virtual DOMï¼ˆçº¯ JS å¯¹è±¡ï¼‰
â†“
æ„å»º Fiber Treeï¼ˆRender Phaseï¼‰
â†“
æ‰¾å‡ºå·®å¼‚ã€æ ‡è®°å˜åŒ–ï¼ˆeffect listï¼‰
â†“
æäº¤åˆ°çœŸå® DOMï¼ˆCommit Phaseï¼‰
â†“
é¡µé¢å±•ç¤º</p>
<h1 id="react-ä¸-vue-çš„å¯¹æ¯”">react ä¸ vue çš„å¯¹æ¯” <a href="#react-%e4%b8%8e-vue-%e7%9a%84%e5%af%b9%e6%af%94" class="anchor">ğŸ”—</a></h1><p>vue ä¸­çš„ v-model åŒå‘ç»‘å®šå¾ˆå¥½ç”¨ï¼Œreact éœ€è¦ value + onChange å»ç¼–å†™ã€‚</p>
<p>props éƒ¨åˆ† react æ›´åŠ ç›´è§‚ï¼Œå°±æ˜¯ function çš„å‚æ•°è€Œå·²ã€‚vue éœ€è¦é¢å¤–å®šä¹‰ã€‚</p>
<p>å­ç»„ä»¶ä¸çˆ¶ç»„ä»¶äº’ç›¸ä¼ æ•°æ®ã€‚ props å‘ä¸‹ä¼ ï¼Œäº‹ä»¶å‘ä¸Šä¼ ã€‚</p>
<h1 id="procomponents">Procomponents <a href="#procomponents" class="anchor">ğŸ”—</a></h1><p><code>npm i @ant-design/pro-components --save</code></p>
<h2 id="å‚è€ƒ">å‚è€ƒ <a href="#%e5%8f%82%e8%80%83" class="anchor">ğŸ”—</a></h2>
    </div>

    
        <div class="tags">
            
                <a href="http://brettkk.github.io/tags/%E5%89%8D%E7%AB%AF">å‰ç«¯</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <script src="https://utteranc.es/client.js"
repo="brettKK/brettkk.github.io"
issue-term="title"
theme="github-light"
crossorigin="anonymous"
async>
</script>  

    <div class="copyright">
    
       Â© Copyright 
       2025 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-cactus-plus'>nodejh</a>
      </div>
    
</footer>




  </body>
</html>
